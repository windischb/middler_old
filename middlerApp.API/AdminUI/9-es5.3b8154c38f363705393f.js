function _slicedToArray(e,t){return _arrayWithHoles(e)||_iterableToArrayLimit(e,t)||_unsupportedIterableToArray(e,t)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _iterableToArrayLimit(e,t){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e)){var n=[],i=!0,c=!1,o=void 0;try{for(var r,a=e[Symbol.iterator]();!(i=(r=a.next()).done)&&(n.push(r.value),!t||n.length!==t);i=!0);}catch(l){c=!0,o=l}finally{try{i||null==a.return||a.return()}finally{if(c)throw o}}return n}}function _arrayWithHoles(e){if(Array.isArray(e))return e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _iterableToArray(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function _defineProperties(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}function _createClass(e,t,n){return t&&_defineProperties(e.prototype,t),n&&_defineProperties(e,n),e}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _inherits(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&_setPrototypeOf(e,t)}function _setPrototypeOf(e,t){return(_setPrototypeOf=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function _createSuper(e){var t=_isNativeReflectConstruct();return function(){var n,i=_getPrototypeOf(e);if(t){var c=_getPrototypeOf(this).constructor;n=Reflect.construct(i,arguments,c)}else n=i.apply(this,arguments);return _possibleConstructorReturn(this,n)}}function _possibleConstructorReturn(e,t){return!t||"object"!=typeof t&&"function"!=typeof t?_assertThisInitialized(e):t}function _assertThisInitialized(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _isNativeReflectConstruct(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function _getPrototypeOf(e){return(_getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}(window.webpackJsonp=window.webpackJsonp||[]).push([[9],{QsR5:function(e,t,n){"use strict";n.r(t),n.d(t,"IDPModule",(function(){return ei}));var i,c,o,r,a,l,s,u,d,f,h,g=n("ofXK"),p=n("3Pt+"),b=n("tyNb"),m=n("ycP/"),v=n("fXoL"),y=n("ZF+8"),C=n("vkgz"),S=n("mrSG"),z=n("4ZtF"),x=((f=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return n}(z.a)).\u0275fac=function(e){return new(e||f)},f.\u0275prov=v.Wb({token:f,factory:f.\u0275fac,providedIn:"root"}),f=Object(S.a)([Object(z.e)({name:"identity-roles",idKey:"Id"})],f)),k=((d=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e)).store=e,i}return n}(z.c)).\u0275fac=function(e){return new(e||d)(v.kc(x))},d.\u0275prov=v.Wb({token:d,factory:d.\u0275fac,providedIn:"root"}),d),M=((u=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return n}(z.a)).\u0275fac=function(e){return new(e||u)},u.\u0275prov=v.Wb({token:u,factory:u.\u0275fac,providedIn:"root"}),u=Object(S.a)([Object(z.e)({name:"identity-users",idKey:"Id"})],u)),w=((s=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e)).store=e,i}return n}(z.c)).\u0275fac=function(e){return new(e||s)(v.kc(M))},s.\u0275prov=v.Wb({token:s,factory:s.\u0275fac,providedIn:"root"}),s),R=((l=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return n}(z.a)).\u0275fac=function(e){return new(e||l)},l.\u0275prov=v.Wb({token:l,factory:l.\u0275fac,providedIn:"root"}),l=Object(S.a)([Object(z.e)({name:"identity-clients",idKey:"Id"})],l)),O=((a=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e)).store=e,i}return n}(z.c)).\u0275fac=function(e){return new(e||a)(v.kc(R))},a.\u0275prov=v.Wb({token:a,factory:a.\u0275fac,providedIn:"root"}),a),_=((r=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return n}(z.a)).\u0275fac=function(e){return new(e||r)},r.\u0275prov=v.Wb({token:r,factory:r.\u0275fac,providedIn:"root"}),r=Object(S.a)([Object(z.e)({name:"identity-api-resources",idKey:"Id"})],r)),I=((o=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e)).store=e,i}return n}(z.c)).\u0275fac=function(e){return new(e||o)(v.kc(_))},o.\u0275prov=v.Wb({token:o,factory:o.\u0275fac,providedIn:"root"}),o),T=((c=function(e){_inherits(n,e);var t=_createSuper(n);function n(){return _classCallCheck(this,n),t.call(this)}return n}(z.a)).\u0275fac=function(e){return new(e||c)},c.\u0275prov=v.Wb({token:c,factory:c.\u0275fac,providedIn:"root"}),c=Object(S.a)([Object(z.e)({name:"identity-resources",idKey:"Id"})],c)),A=((i=function(e){_inherits(n,e);var t=_createSuper(n);function n(e){var i;return _classCallCheck(this,n),(i=t.call(this,e)).store=e,i}return n}(z.c)).\u0275fac=function(e){return new(e||i)(v.kc(T))},i.\u0275prov=v.Wb({token:i,factory:i.\u0275fac,providedIn:"root"}),i),P=n("tk/3"),D=((h=function(){function e(t,n,i,c,o,r,a,l,s,u,d,f){var h=this;_classCallCheck(this,e),this.identityRolesStore=t,this.identityRolesQuery=n,this.identityUsersStore=i,this.identityUsersQuery=c,this.identityClientsStore=o,this.identityClientsQuery=r,this.identityApiResourcesStore=a,this.identityApiResourcesQuery=l,this.identityResourcesStore=s,this.identityResourcesQuery=u,this.http=d,this.message=f,this.message.RunOnEveryReconnect((function(){h.SubscribeUserEvents(),h.SubscribeRoleEvents(),h.SubscribeClientsEvents(),h.SubscribeApiResourcesEvents(),h.SubscribeIdentityResourcesEvents()}))}return _createClass(e,[{key:"SubscribeUserEvents",value:function(){var e=this;this.message.Stream("IDPUsers.Subscribe").pipe(Object(C.a)((function(t){switch(console.log(t),t.Action){case"Created":e.identityUsersStore.add(t.Payload);break;case"Updated":e.identityUsersStore.update(t.Payload.Id,(function(e){return t.Payload}));break;case"Deleted":e.identityUsersStore.update(t.Payload,(function(e){return Object.assign(Object.assign({},e),{Deleted:!0})}))}}))).subscribe()}},{key:"ReLoadUsers",value:function(){var e=this;this.http.get("api/idp/users").pipe(Object(C.a)((function(t){return e.identityUsersStore.set(t)}))).subscribe()}},{key:"GetAllUsers",value:function(e){return!e&&this.identityUsersQuery.getHasCache()||this.ReLoadUsers(),this.identityUsersQuery.selectAll()}},{key:"GetUser",value:function(e){return this.http.get("api/idp/users/".concat(e))}},{key:"CreateUser",value:function(e){return this.http.post("api/idp/users",e)}},{key:"UpdateUser",value:function(e){return this.http.put("api/idp/users",e)}},{key:"DeleteUser",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.http.request("delete","api/idp/users",{body:t})}},{key:"SubscribeRoleEvents",value:function(){var e=this;this.message.Stream("IDPRoles.Subscribe").pipe(Object(C.a)((function(t){switch(console.log(t),t.Action){case"Created":e.identityRolesStore.add(t.Payload);break;case"Updated":e.identityRolesStore.update(t.Payload.Id,(function(e){return t.Payload}));break;case"Deleted":e.identityRolesStore.update(t.Payload,(function(e){return Object.assign(Object.assign({},e),{Deleted:!0})}))}}))).subscribe()}},{key:"ReLoadRoles",value:function(){var e=this;this.message.Invoke("IDPRoles.GetRolesList").pipe(Object(C.a)((function(t){return e.identityRolesStore.set(t)}))).subscribe()}},{key:"GetAllRoles",value:function(e){return!e&&this.identityRolesQuery.getHasCache()||this.ReLoadRoles(),this.identityRolesQuery.selectAll()}},{key:"GetRole",value:function(e){return this.http.get("api/idp/roles/".concat(e))}},{key:"CreateRole",value:function(e){return this.http.post("api/idp/roles",e)}},{key:"UpdateRole",value:function(e){return this.http.put("api/idp/roles",e)}},{key:"DeleteRole",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.http.request("delete","api/idp/roles",{body:t})}},{key:"SubscribeClientsEvents",value:function(){var e=this;this.message.Stream("IDPClients.Subscribe").pipe(Object(C.a)((function(t){switch(console.log(t),t.Action){case"Created":e.identityClientsStore.add(t.Payload);break;case"Updated":e.identityClientsStore.update(t.Payload.Id,(function(e){return t.Payload}));break;case"Deleted":e.identityClientsStore.update(t.Payload,(function(e){return Object.assign(Object.assign({},e),{Deleted:!0})}))}}))).subscribe()}},{key:"ReLoadClients",value:function(){var e=this;this.http.get("api/idp/clients").pipe(Object(C.a)((function(t){return e.identityClientsStore.set(t)}))).subscribe()}},{key:"GetAllClients",value:function(e){return!e&&this.identityClientsQuery.getHasCache()||this.ReLoadClients(),this.identityClientsQuery.selectAll()}},{key:"GetClient",value:function(e){return this.http.get("api/idp/clients/".concat(e))}},{key:"CreateClient",value:function(e){return this.http.post("api/idp/clients",e)}},{key:"UpdateClient",value:function(e){return this.http.put("api/idp/clients",e)}},{key:"DeleteClient",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.http.request("delete","api/idp/clients",{body:t})}},{key:"SubscribeApiResourcesEvents",value:function(){var e=this;this.message.Stream("IDPApiResources.Subscribe").pipe(Object(C.a)((function(t){switch(console.log(t),t.Action){case"Created":e.identityApiResourcesStore.add(t.Payload);break;case"Updated":e.identityApiResourcesStore.update(t.Payload.Id,(function(e){return t.Payload}));break;case"Deleted":e.identityApiResourcesStore.update(t.Payload,(function(e){return Object.assign(Object.assign({},e),{Deleted:!0})}))}}))).subscribe()}},{key:"ReLoadApiResources",value:function(){var e=this;this.http.get("api/idp/api-resources").pipe(Object(C.a)((function(t){return e.identityApiResourcesStore.set(t)}))).subscribe()}},{key:"GetAllApiResources",value:function(e){return!e&&this.identityApiResourcesQuery.getHasCache()||this.ReLoadApiResources(),this.identityApiResourcesQuery.selectAll()}},{key:"GetApiResource",value:function(e){return this.http.get("api/idp/api-resources/".concat(e))}},{key:"CreateApiResource",value:function(e){return this.http.post("api/idp/api-resources",e)}},{key:"UpdateApiResource",value:function(e){return this.http.put("api/idp/api-resources",e)}},{key:"DeleteApiResource",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.http.request("delete","api/idp/api-resources",{body:t})}},{key:"SubscribeIdentityResourcesEvents",value:function(){var e=this;this.message.Stream("IDPIdentityResources.Subscribe").pipe(Object(C.a)((function(t){switch(console.log(t),t.Action){case"Created":e.identityResourcesStore.add(t.Payload);break;case"Updated":e.identityResourcesStore.update(t.Payload.Id,(function(e){return t.Payload}));break;case"Deleted":e.identityResourcesStore.update(t.Payload,(function(e){return Object.assign(Object.assign({},e),{Deleted:!0})}))}}))).subscribe()}},{key:"ReLoadIdentityResources",value:function(){var e=this;this.http.get("api/idp/identity-resources").pipe(Object(C.a)((function(t){return e.identityResourcesStore.set(t)}))).subscribe()}},{key:"GetAllIdentityResources",value:function(e){return!e&&this.identityResourcesQuery.getHasCache()||this.ReLoadIdentityResources(),this.identityResourcesQuery.selectAll()}},{key:"GetIdentityResource",value:function(e){return this.http.get("api/idp/identity-resources/".concat(e))}},{key:"CreateIdentityResource",value:function(e){return this.http.post("api/idp/identity-resources",e)}},{key:"UpdateIdentityResource",value:function(e){return this.http.put("api/idp/identity-resources",e)}},{key:"DeleteIdentityResource",value:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return this.http.request("delete","api/idp/identity-resources",{body:t})}}]),e}()).\u0275fac=function(e){return new(e||h)(v.kc(x),v.kc(k),v.kc(M),v.kc(w),v.kc(R),v.kc(O),v.kc(_),v.kc(I),v.kc(T),v.kc(A),v.kc(P.b),v.kc(y.b))},h.\u0275prov=v.Wb({token:h,factory:h.\u0275fac,providedIn:"root"}),h),N=n("h0m+"),U=n("gwh1"),F=n("t7qs"),G=n("Q8cG"),E=n("C2AL"),j=n("FwiY"),L=n("OzZK"),Q=n("RwU8"),B=["itemsContextMenu"];function H(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().EditUser(e.First)})),v.bc(1,"i",7),v.Sc(2," Edit User "),v.fc()}}function W(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveUser(e.SelectedData)})),v.bc(1,"i",8),v.Sc(2," Delete User "),v.fc()}}function $(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddUser()})),v.bc(2,"i",5),v.Sc(3," Add User "),v.fc(),v.Qc(4,H,3,0,"li",6),v.Qc(5,W,3,0,"li",6),v.fc()}if(2&e){var i=t.$implicit;v.Mb(4),v.yc("ngIf",i.Single),v.Mb(1),v.yc("ngIf",i.Any)}}function V(e,t){if(1&e){var n=v.hc();v.gc(0,"button",9),v.oc("click",(function(){return v.Ic(n),v.rc().ReloadUsersList()})),v.bc(1,"i",10),v.Sc(2,"Reload Users"),v.fc()}}var q,X=((q=function(){function e(t,n,i,c,o,r){var a=this;_classCallCheck(this,e),this.uiService=t,this.idService=n,this.router=i,this.route=c,this.overlay=o,this.viewContainerRef=r,this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0}))}),(function(e){return e.Default("UserName").SetInitialWidth(200,!0)}),(function(e){return e.Default("FirstName").SetInitialWidth(200,!0)}),(function(e){return e.Default("LastName").SetInitialWidth(200,!0)}),(function(e){return e.Default("Email")})).SetData(this.idService.GetAllUsers()).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);a.contextMenu=a.overlay.OpenContextMenu(e.event,a.itemsContextMenu,a.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){var n=new m.a(t,e);a.contextMenu=a.overlay.OpenContextMenu(e,a.itemsContextMenu,a.viewContainerRef,n)})).OnRowDoubleClicked((function(e){a.EditUser(e.node.data)})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})).SetDataImmutable((function(e){return e.Id})),t.Set((function(e){e.Header.Title="IDP / Users",e.Content.Scrollable=!1,e.Header.Icon="fa#user"}))}return _createClass(e,[{key:"AddUser",value:function(){this.router.navigate(["create"],{relativeTo:this.route})}},{key:"EditUser",value:function(e){this.router.navigate([e.Id],{relativeTo:this.route})}},{key:"RemoveUser",value:function(e){var t;(t=this.idService).DeleteUser.apply(t,_toConsumableArray(e.map((function(e){return e.Id})))).subscribe()}},{key:"ReloadUsersList",value:function(){this.idService.ReLoadUsers()}}]),e}()).\u0275fac=function(e){return new(e||q)(v.ac(y.a),v.ac(D),v.ac(b.i),v.ac(b.a),v.ac(N.c),v.ac(v.Y))},q.\u0275cmp=v.Ub({type:q,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&v.Xc(B,!0),2&e&&v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first)},decls:4,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["itemsContextMenu",""],["dbPortalTemplate","Header-Outlet-Right"],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","","nzType","user-add","nzTheme","outline"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.bc(0,"ag-grid-angular",0),v.Qc(1,$,6,2,"ng-template",null,1,v.Rc),v.Qc(3,V,3,0,"ng-template",2)),2&e&&v.yc("dbGrid",t.grid)},directives:[U.a,m.b,F.e,G.c,E.a,G.e,j.b,g.t,L.a,Q.a],styles:["[_nghost-%COMP%]{padding:10px 0}"],changeDetection:0}),q),J=["itemsContextMenu"];function Y(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().EditRole(e.First)})),v.bc(1,"i",7),v.Sc(2," Edit Role "),v.fc()}}function K(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveRole(e.SelectedData)})),v.bc(1,"i",8),v.Sc(2," Delete Role "),v.fc()}}function Z(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddRole()})),v.bc(2,"i",5),v.Sc(3," Add Role "),v.fc(),v.Qc(4,Y,3,0,"li",6),v.Qc(5,K,3,0,"li",6),v.fc()}if(2&e){var i=t.$implicit;v.Mb(4),v.yc("ngIf",i.Single),v.Mb(1),v.yc("ngIf",i.Any)}}function ee(e,t){if(1&e){var n=v.hc();v.gc(0,"button",9),v.oc("click",(function(){return v.Ic(n),v.rc().ReloadRolesList()})),v.bc(1,"i",10),v.Sc(2,"Reload Roles"),v.fc()}}var te,ne=((te=function(){function e(t,n,i,c,o,r,a){var l=this;_classCallCheck(this,e),this.uiService=t,this.idService=n,this.router=i,this.route=c,this.overlay=o,this.viewContainerRef=r,this.identityRolesQuery=a,this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0,e.headerCheckboxSelectionFilteredOnly=!0}))}),(function(e){return e.Default("Name")}),(function(e){return e.Default("DisplayName")}),(function(e){return e.Default("Description")})).SetData(this.idService.GetAllRoles()).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);l.contextMenu=l.overlay.OpenContextMenu(e.event,l.itemsContextMenu,l.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){var n=new m.a(t,e);l.contextMenu=l.overlay.OpenContextMenu(e,l.itemsContextMenu,l.viewContainerRef,n)})).OnRowDoubleClicked((function(e){l.EditRole(e.node.data)})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})).SetRowClassRules({deleted:"data.Deleted"}).SetDataImmutable((function(e){return e.Id})),t.Set((function(e){e.Header.Title="IDP / Roles",e.Content.Scrollable=!1,e.Header.Icon="fa#user-tag"}))}return _createClass(e,[{key:"AddRole",value:function(){var e;this.router.navigate(["create"],{relativeTo:this.route}),null===(e=this.contextMenu)||void 0===e||e.Close()}},{key:"EditRole",value:function(e){var t;this.router.navigate([e.Id],{relativeTo:this.route}),null===(t=this.contextMenu)||void 0===t||t.Close()}},{key:"RemoveRole",value:function(e){var t,n;(t=this.idService).DeleteRole.apply(t,_toConsumableArray(e.map((function(e){return e.Id})))).subscribe(),null===(n=this.contextMenu)||void 0===n||n.Close()}},{key:"ReloadRolesList",value:function(){this.idService.ReLoadRoles()}}]),e}()).\u0275fac=function(e){return new(e||te)(v.ac(y.a),v.ac(D),v.ac(b.i),v.ac(b.a),v.ac(N.c),v.ac(v.Y),v.ac(k))},te.\u0275cmp=v.Ub({type:te,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&v.Xc(J,!0),2&e&&v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first)},decls:4,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["itemsContextMenu",""],["dbPortalTemplate","Header-Outlet-Right"],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","","nzType","user-add","nzTheme","outline"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.bc(0,"ag-grid-angular",0),v.Qc(1,Z,6,2,"ng-template",null,1,v.Rc),v.Qc(3,ee,3,0,"ng-template",2)),2&e&&v.yc("dbGrid",t.grid)},directives:[U.a,m.b,F.e,G.c,E.a,G.e,j.b,g.t,L.a,Q.a],styles:["[_nghost-%COMP%]{padding:10px 0}"]}),te),ie=["itemsContextMenu"];function ce(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().EditClient(e.First)})),v.bc(1,"i",7),v.Sc(2," Edit Client "),v.fc()}}function oe(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveClient(e.SelectedData)})),v.bc(1,"i",8),v.Sc(2," Delete Client "),v.fc()}}function re(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddClient()})),v.bc(2,"i",5),v.Sc(3," Add Client "),v.fc(),v.Qc(4,ce,3,0,"li",6),v.Qc(5,oe,3,0,"li",6),v.fc()}if(2&e){var i=t.$implicit;v.Mb(4),v.yc("ngIf",i.Single),v.Mb(1),v.yc("ngIf",i.Any)}}function ae(e,t){if(1&e){var n=v.hc();v.gc(0,"button",9),v.oc("click",(function(){return v.Ic(n),v.rc().ReloadClientsList()})),v.bc(1,"i",10),v.Sc(2,"Reload Clients"),v.fc()}}var le,se=((le=function(){function e(t,n,i,c,o,r){var a=this;_classCallCheck(this,e),this.uiService=t,this.idService=n,this.router=i,this.route=c,this.overlay=o,this.viewContainerRef=r,this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0}))}),(function(e){return e.Default("ClientId")}),(function(e){return e.Default("ClientName")})).SetData(this.idService.GetAllClients()).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);a.contextMenu=a.overlay.OpenContextMenu(e.event,a.itemsContextMenu,a.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){var n=new m.a(t,e);a.contextMenu=a.overlay.OpenContextMenu(e,a.itemsContextMenu,a.viewContainerRef,n)})).OnRowDoubleClicked((function(e){a.EditClient(e.node.data)})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})),t.Set((function(e){e.Header.Title="IDP / Clients",e.Content.Scrollable=!1,e.Header.Icon="fa#desktop"}))}return _createClass(e,[{key:"AddClient",value:function(){this.router.navigate(["create"],{relativeTo:this.route})}},{key:"EditClient",value:function(e){this.router.navigate([e.Id],{relativeTo:this.route})}},{key:"RemoveClient",value:function(e){}},{key:"ReloadClientsList",value:function(){this.idService.ReLoadClients()}}]),e}()).\u0275fac=function(e){return new(e||le)(v.ac(y.a),v.ac(D),v.ac(b.i),v.ac(b.a),v.ac(N.c),v.ac(v.Y))},le.\u0275cmp=v.Ub({type:le,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&v.Xc(ie,!0),2&e&&v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first)},decls:4,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["itemsContextMenu",""],["dbPortalTemplate","Header-Outlet-Right"],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","","nzType","user-add","nzTheme","outline"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.bc(0,"ag-grid-angular",0),v.Qc(1,re,6,2,"ng-template",null,1,v.Rc),v.Qc(3,ae,3,0,"ng-template",2)),2&e&&v.yc("dbGrid",t.grid)},directives:[U.a,m.b,F.e,G.c,E.a,G.e,j.b,g.t,L.a,Q.a],styles:["[_nghost-%COMP%]{padding:10px 0}"]}),le),ue=n("itXk"),de=n("lJxs"),fe=n("bHdf"),he=n("ocnv"),ge=n("oyxB"),pe=n("B+r4"),be=n("PTRe"),me=n("TaO5"),ve=n("IvDN"),ye=n("0lU3"),Ce=n("gPmL");function Se(e,t){var n,i,c,o;return(null===(n=e.Name)||void 0===n?void 0:n.toLowerCase())<(null===(i=t.Name)||void 0===i?void 0:i.toLowerCase())?-1:(null===(c=e.Name)||void 0===c?void 0:c.toLowerCase())>(null===(o=t.Name)||void 0===o?void 0:o.toLowerCase())?1:0}var ze=n("2Vo4"),xe=n("F6ss"),ke=n("5+WD"),Me=n("VRyK"),we=n("LRne"),Re=n("6NWb");function Oe(e,t){if(1&e){var n=v.hc();v.gc(0,"i",16),v.oc("click",(function(){return v.Ic(n),v.rc(2).form.get("Filter").patchValue("")})),v.fc()}}function _e(e,t){if(1&e&&(v.Qc(0,Oe,1,0,"i",15),v.sc(1,"async")),2&e){var n=v.rc();v.yc("ngIf",v.tc(1,1,n.form.get("Filter").valueChanges))}}var Ie=function(){return["fas","chevron-left"]},Te=function(){return["fas","chevron-right"]};function Ae(e,t){if(1&e){var n=v.hc();v.gc(0,"div",17),v.gc(1,"div",18),v.gc(2,"div",19),v.bc(3,"fa-icon",20),v.fc(),v.gc(4,"div",21),v.oc("click",(function(){v.Ic(n);var e=t.$implicit;return v.rc().ToggleRole(e)})),v.gc(5,"div",22),v.Sc(6),v.fc(),v.gc(7,"div"),v.Sc(8),v.fc(),v.fc(),v.gc(9,"div",19),v.bc(10,"fa-icon",20),v.fc(),v.fc(),v.fc()}if(2&e){var i=t.$implicit;v.Sb("deleted",i.Deleted),v.Mb(2),v.Sb("shrinked",i.Selected),v.Mb(1),v.yc("icon",v.Ac(12,Ie)),v.Mb(1),v.Sb("isSelected",i.Selected),v.Mb(2),v.Tc(i.Name),v.Mb(2),v.Tc(i.DisplayName),v.Mb(1),v.Sb("shrinked",!i.Selected),v.Mb(1),v.yc("icon",v.Ac(13,Te))}}var Pe,De=function(){return["fas","angle-double-right"]},Ne=((Pe=function(){function e(t,n,i){var c=this;_classCallCheck(this,e),this.identityRolesQuery=t,this.identityService=n,this.fb=i,this.selectedRolesSubject$=new ze.a([]),this.selectedRolesChanged=new v.q,this.closeSidebar=new v.q,this.form=this.fb.group({Filter:[null]}),this.filter$=Object(Me.a)(Object(we.a)(null),this.form.get("Filter").valueChanges),this.availableRoles$=Object(ue.a)(this.identityService.GetAllRoles(),this.selectedRolesSubject$,this.filter$).pipe(Object(de.a)((function(e){var t=_slicedToArray(e,3),n=t[0],i=t[1],o=t[2],r=n.filter((function(e){return e.Deleted})).map((function(e){return e.Id})),a=i.filter((function(e){return r.includes(e.Id)}));if(a&&a.length>0){var l=i.map((function(e){return Object.assign(Object.assign({},e),{Deleted:a.includes(e)})}));c.selectedRolesChanged.next(l)}var s=n;if(o){var u=new RegExp("".concat(o),"i");s=s.filter((function(e){return e.Name.match(u)||e.DisplayName.match(u)}))}return s.sort(Se).map((function(e){return Object.assign(Object.assign({},e),{Selected:i.map((function(e){return e.Id})).includes(e.Id)})}))})))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ToggleRole",value:function(e){var t;t=e.Selected?this.selectedRolesSubject$.getValue().filter((function(t){return t.Id!=e.Id})):[].concat(_toConsumableArray(this.selectedRolesSubject$.getValue()),[e]),this.selectedRolesChanged.next(t)}},{key:"Close",value:function(){this.closeSidebar.next()}},{key:"selectedRoles",set:function(e){this.selectedRolesSubject$.next(e)}}]),e}()).\u0275fac=function(e){return new(e||Pe)(v.ac(k),v.ac(D),v.ac(p.d))},Pe.\u0275cmp=v.Ub({type:Pe,selectors:[["add-roles-list"]],inputs:{selectedRoles:"selectedRoles"},outputs:{selectedRolesChanged:"selectedRolesChanged",closeSidebar:"closeSidebar"},decls:19,vars:7,consts:[[1,"main-header"],[1,"title-container"],[1,"title-icon","closeSidebar",2,"padding-left","8px",3,"click"],["nz-icon","",2,"font-size","x-large","width","32px","text-align","left",3,"icon"],[1,"title-icon"],["icon","fa#user-tag",2,"font-size","20px","text-align","left"],[2,"display","flex","flex-direction","column","justify-content","center","line-height","1.3em"],[1,"title"],["nzNoColon","","nz-form","",2,"padding","10px","border-bottom","1px solid #eaeaeb",3,"formGroup"],[3,"nzSuffix"],["type","text","nz-input","","formControlName","Filter","placeholder","Filter"],["inputClearTpl",""],[2,"overflow-x","auto"],[2,"margin","10px 5px"],["class","roleItem",3,"deleted",4,"ngFor","ngForOf"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],[1,"roleItem"],[2,"display","flex"],[1,"selector"],["nz-icon","",2,"width","1.18em","margin","0 .25rem 0 0","font-size","1.2em",3,"icon"],[1,"action-item",2,"padding","5px","flex-grow","1",3,"click"],[2,"font-size","large","font-weight","bold"]],template:function(e,t){if(1&e&&(v.gc(0,"div",0),v.gc(1,"div",1),v.gc(2,"div",2),v.oc("click",(function(){return t.Close()})),v.bc(3,"fa-icon",3),v.fc(),v.gc(4,"div",4),v.bc(5,"db-icon",5),v.fc(),v.gc(6,"div",6),v.gc(7,"div",7),v.Sc(8," Available Roles "),v.fc(),v.fc(),v.fc(),v.fc(),v.gc(9,"form",8),v.gc(10,"nz-form-control"),v.gc(11,"nz-input-group",9),v.bc(12,"input",10),v.fc(),v.Qc(13,_e,2,3,"ng-template",null,11,v.Rc),v.fc(),v.fc(),v.gc(15,"div",12),v.gc(16,"div",13),v.Qc(17,Ae,11,14,"div",14),v.sc(18,"async"),v.fc(),v.fc()),2&e){var n=v.Gc(14);v.Mb(3),v.yc("icon",v.Ac(6,De)),v.Mb(6),v.yc("formGroup",t.form),v.Mb(2),v.yc("nzSuffix",n),v.Mb(6),v.yc("ngForOf",v.tc(18,4,t.availableRoles$))}},directives:[Re.b,E.a,j.b,Ce.c,p.q,p.m,he.b,p.g,pe.a,he.a,be.c,be.d,be.b,p.c,p.l,p.f,g.s,g.t],pipes:[g.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;height:100%}.action-item[_ngcontent-%COMP%]{margin-bottom:10px!important;border-radius:0!important;box-shadow:0 0 3px 1px #cecece;background-color:#fff}.action-item.disabled[_ngcontent-%COMP%]{opacity:.6;box-shadow:none;background-color:#e2e2e2}.action-item[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{border-right:1px solid #fff}.action-item[_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}.action-item.selected[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{background-color:#292f3b;color:#fff}.action-item[_ngcontent-%COMP%]:hover{background-color:#b2b7c2}.new-rule.ui.button[_ngcontent-%COMP%]{margin:0}.options[_ngcontent-%COMP%]{background-color:grey;height:50px}.list-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background-color:inherit!important}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:inherit}.dragHandle[_ngcontent-%COMP%]{cursor:-webkit-grab;cursor:grab}.list-item[_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:#e0e1e2}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{cursor:inherit}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:inherit}.list-item.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%], .new-rule.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%]{border-radius:0!important;background-color:#2f2f2f;color:#f5f5f5}.outer.cdk-drop-list-dragging[_ngcontent-%COMP%] > .new-rule.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%]{display:none}.context-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0!important}.selector[_ngcontent-%COMP%]{padding:10px 0 0 5px;overflow:hidden;visibility:hidden}.isSelected[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}.shrinked[_ngcontent-%COMP%]{width:0;padding:0}.roleItem[_ngcontent-%COMP%]:hover   .selector[_ngcontent-%COMP%]{visibility:visible}.main-header[_ngcontent-%COMP%]{min-height:40px;max-height:40px;background-color:#292f3b;color:#f5f5f5;display:flex;flex-direction:row}.closeSidebar[_ngcontent-%COMP%]{transition:.1s}.closeSidebar[_ngcontent-%COMP%]:hover{transform:scale(1.3) translate(3px)}.main-header[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{display:flex;align-items:center}.main-header[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;justify-items:center;padding-right:5px}.main-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700}.main-header[_ngcontent-%COMP%]   .title.title-only[_ngcontent-%COMP%]{font-size:2em}.deleted[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]{text-decoration:line-through}"]}),Pe),Ue=["itemsContextMenu"],Fe=["drawerTemplate"],Ge=function(){return["far","plus-square"]};function Ee(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",7),v.gc(1,"li",8),v.oc("click",(function(){return v.Ic(n),v.rc().AddRole()})),v.bc(2,"fa-icon",9),v.Sc(3," Add Role "),v.fc(),v.fc()}2&e&&(v.Mb(2),v.yc("icon",v.Ac(1,Ge)))}function je(e,t){if(1&e){var n=v.hc();v.gc(0,"li",8),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveRole(e.SelectedData)})),v.bc(1,"i",11),v.Sc(2," Delete "),v.fc()}}function Le(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",7),v.gc(1,"li",8),v.oc("click",(function(){return v.Ic(n),v.rc().AddRole()})),v.bc(2,"fa-icon",9),v.Sc(3," Add Role "),v.fc(),v.Qc(4,je,3,0,"li",10),v.fc()}if(2&e){var i=t.$implicit;v.Mb(2),v.yc("icon",v.Ac(2,Ge)),v.Mb(2),v.yc("ngIf",i.Any)}}var Qe,Be=((Qe=function(){function e(t,n,i){var c=this;_classCallCheck(this,e),this.overlay=t,this.viewContainerRef=n,this.drawerService=i,this.rolesSubject$=new ze.a(null),this._roles=[],this.sideBarOpen=!1,this._disabled=!1,this.rolesChange=new v.q,this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0}))}),(function(e){return e.Default("Name").SetInitialWidth(300,!0)}),(function(e){return e.Default("DisplayName")})).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnDataUpdate((function(e){return c.propagateChange(e)})).OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);c.contextMenu=c.overlay.OpenContextMenu(e.event,c.itemsContextMenu,c.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){var n=new m.a(t,e);c.contextMenu=c.overlay.OpenContextMenu(e,c.itemsContextMenu,c.viewContainerRef,n)})).OnRowDoubleClicked((function(e){})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})).SetDataImmutable((function(e){return e.Id})).SetRowClassRules({deleted:"data.Deleted"}),this.value="ng",this.registered=[],this.onTouched=function(){}}return _createClass(e,[{key:"RemoveRole",value:function(e){this.roles=this.roles.filter((function(t){return!e.includes(t)})),this.contextMenu.Close()}},{key:"AddRole",value:function(){this.sideBarOpen=!0,this.contextMenu.Close()}},{key:"RolesChanged",value:function(e){this.roles=e,this.propagateChange(e)}},{key:"openTemplate",value:function(){var e=this.drawerService.create({nzTitle:"Template",nzContent:this.drawerTemplate,nzContentParams:{value:this.value},nzMask:!1,nzWidth:400});e.afterOpen.subscribe((function(){console.log("Drawer(Template) open")})),e.afterClose.subscribe((function(){console.log("Drawer(Template) close")}))}},{key:"propagateChange",value:function(e){this.rolesChange.emit(e),this.registered.forEach((function(t){t(e)}))}},{key:"writeValue",value:function(e){this.roles=e}},{key:"registerOnChange",value:function(e){-1===this.registered.indexOf(e)&&this.registered.push(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"roles",set:function(e){var t,n=e||[];0==n.length&&(n=[]),this._roles=n.sort(Se),this.rolesSubject$.next(this._roles),null===(t=this.grid)||void 0===t||t.SetData(this._roles)},get:function(){return this._roles}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&!1!==e&&!!e}}]),e}()).\u0275fac=function(e){return new(e||Qe)(v.ac(N.c),v.ac(v.Y),v.ac(xe.b))},Qe.\u0275cmp=v.Ub({type:Qe,selectors:[["roles-manager"]],viewQuery:function(e,t){var n;1&e&&(v.Xc(Ue,!0),v.Xc(Fe,!0)),2&e&&(v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first),v.Fc(n=v.pc())&&(t.drawerTemplate=n.first))},inputs:{roles:"roles",disabled:"disabled"},outputs:{rolesChange:"rolesChange"},features:[v.Lb([{provide:p.j,useExisting:Qe,multi:!0}])],decls:9,vars:4,consts:[[2,"flex-grow","1","display","flex","position","relative"],["cdkDropList","",1,"ag-theme-balham",3,"dbGrid"],[1,"roles-manager-sidebar"],[2,"height","100%","background-color","white"],[3,"selectedRoles","selectedRolesChanged","closeSidebar"],["viewportContextMenu",""],["itemsContextMenu",""],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","",3,"icon"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(v.gc(0,"div",0),v.bc(1,"ag-grid-angular",1),v.gc(2,"div",2),v.gc(3,"div",3),v.gc(4,"add-roles-list",4),v.oc("selectedRolesChanged",(function(e){return t.RolesChanged(e)}))("closeSidebar",(function(){return t.sideBarOpen=!1})),v.fc(),v.fc(),v.fc(),v.fc(),v.Qc(5,Ee,4,2,"ng-template",null,5,v.Rc),v.Qc(7,Le,5,3,"ng-template",null,6,v.Rc)),2&e&&(v.Mb(1),v.yc("dbGrid",t.grid),v.Mb(1),v.Sb("open",t.sideBarOpen),v.Mb(2),v.yc("selectedRoles",t.roles))},directives:[U.a,m.b,ke.c,Ne,G.c,E.a,G.e,Re.b,j.b,g.t],styles:["[_nghost-%COMP%]{width:100%;flex-grow:1;display:flex;flex-direction:column;overflow:hidden}.editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer;min-height:32px}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}.editable-row[_ngcontent-%COMP%]{height:49px}nz-table[_ngcontent-%COMP%]{flex-grow:1}.roles-manager-sidebar[_ngcontent-%COMP%]{position:absolute;right:0;width:40%;height:100%;transition:.3s;border-left:1px solid grey;padding:0 1px 1px 0;transform:translate3d(100%,0,0)}.roles-manager-sidebar.open[_ngcontent-%COMP%]{transform:translateZ(0)}"]}),Qe),He=function e(){_classCallCheck(this,e),this.Type=null,this.Value=null},We=["itemsContextMenu"],$e=function(){return["far","plus-square"]};function Ve(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddClaim()})),v.bc(2,"fa-icon",5),v.Sc(3," Add Claim "),v.fc(),v.fc()}2&e&&(v.Mb(2),v.yc("icon",v.Ac(1,$e)))}function qe(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveClaim(e.SelectedData)})),v.bc(1,"i",7),v.Sc(2," Delete "),v.fc()}}function Xe(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddClaim()})),v.bc(2,"fa-icon",5),v.Sc(3," Add Claim "),v.fc(),v.Qc(4,qe,3,0,"li",6),v.fc()}if(2&e){var i=t.$implicit;v.Mb(2),v.yc("icon",v.Ac(2,$e)),v.Mb(2),v.yc("ngIf",i.Any)}}var Je,Ye=((Je=function(){function e(t,n){var i=this;_classCallCheck(this,e),this.overlay=t,this.viewContainerRef=n,this._claims=[],this._disabled=!1,this.claimsChange=new v.q,this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0}))}),(function(e){return e.Default("Type").Editable().SetInitialWidth(300,!0).Set((function(e){e.filter="agTextColumnFilter",e.filterParams={buttons:["reset","apply"]}}))}),(function(e){return e.Default("Value").Editable()})).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnDataUpdate((function(e){return i.propagateChange(e)})).OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);i.contextMenu=i.overlay.OpenContextMenu(e.event,i.itemsContextMenu,i.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){t.deselectAll();var n=new m.a(t,e);i.contextMenu=i.overlay.OpenContextMenu(e,i.itemsContextMenu,i.viewContainerRef,n)})).OnRowDoubleClicked((function(e){})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})),this.i=0,this.registered=[],this.onTouched=function(){}}return _createClass(e,[{key:"buildNextClaim",value:function(){var e=new He;return this.i++,e}},{key:"AddClaim",value:function(){this.claims=[].concat(_toConsumableArray(this.claims),[this.buildNextClaim()]),this.contextMenu.Close()}},{key:"RemoveClaim",value:function(e){this.claims=this.claims.filter((function(t){return!e.includes(t)})),this.contextMenu.Close()}},{key:"propagateChange",value:function(e){this.claimsChange.emit(e),this.registered.forEach((function(t){t(e)}))}},{key:"writeValue",value:function(e){this.claims=e}},{key:"registerOnChange",value:function(e){-1===this.registered.indexOf(e)&&this.registered.push(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"claims",set:function(e){var t,n=e||[];0==n.length&&(n=[]),this._claims=n,null===(t=this.grid)||void 0===t||t.SetData(this._claims)},get:function(){return this._claims}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&!1!==e&&!!e}}]),e}()).\u0275fac=function(e){return new(e||Je)(v.ac(N.c),v.ac(v.Y))},Je.\u0275cmp=v.Ub({type:Je,selectors:[["claims-manager"]],viewQuery:function(e,t){var n;1&e&&v.Xc(We,!0),2&e&&v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first)},inputs:{claims:"claims",disabled:"disabled"},outputs:{claimsChange:"claimsChange"},features:[v.Lb([{provide:p.j,useExisting:Je,multi:!0}])],decls:5,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["viewportContextMenu",""],["itemsContextMenu",""],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","",3,"icon"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(v.bc(0,"ag-grid-angular",0),v.Qc(1,Ve,4,2,"ng-template",null,1,v.Rc),v.Qc(3,Xe,5,3,"ng-template",null,2,v.Rc)),2&e&&v.yc("dbGrid",t.grid)},directives:[U.a,m.b,G.c,E.a,G.e,Re.b,j.b,g.t],styles:["[_nghost-%COMP%]{width:100%;flex-grow:1;display:flex;flex-direction:column}.editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer;min-height:32px}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}.editable-row[_ngcontent-%COMP%]{height:49px}nz-table[_ngcontent-%COMP%]{flex-grow:1}"]}),Je);function Ke(e,t){1&e&&(v.bc(0,"i",36),v.Sc(1,"Basic "))}function Ze(e,t){1&e&&(v.bc(0,"db-icon",37),v.Sc(1,"Roles "))}function et(e,t){1&e&&(v.gc(0,"div",38),v.bc(1,"roles-manager",39),v.fc())}function tt(e,t){1&e&&(v.bc(0,"i",36),v.Sc(1,"Claims "))}function nt(e,t){1&e&&(v.gc(0,"div",38),v.bc(1,"claims-manager",40),v.fc())}function it(e,t){1&e&&(v.bc(0,"i",43),v.Sc(1,"Debug"))}function ct(e,t){if(1&e&&(v.gc(0,"nz-tab",4),v.Qc(1,it,2,0,"ng-template",null,41,v.Rc),v.gc(3,"div",42),v.gc(4,"pre"),v.Sc(5),v.sc(6,"json"),v.fc(),v.fc(),v.fc()),2&e){var n=v.Gc(2),i=v.rc(2);v.yc("nzTitle",n),v.Mb(5),v.Tc(v.tc(6,2,i.form.value))}}var ot=function(){return{inkBar:!0,tabPane:!1}};function rt(e,t){if(1&e){var n=v.hc();v.ec(0),v.gc(1,"form",2),v.gc(2,"nz-tabset",3),v.gc(3,"nz-tab",4),v.Qc(4,Ke,2,0,"ng-template",null,5,v.Rc),v.gc(6,"div",6),v.gc(7,"div",7),v.gc(8,"div",8),v.gc(9,"div",9),v.gc(10,"nz-form-label",10),v.Sc(11,"UserName"),v.fc(),v.gc(12,"nz-form-control"),v.bc(13,"input",11),v.fc(),v.fc(),v.fc(),v.gc(14,"div",8),v.gc(15,"div",12),v.gc(16,"div",13),v.gc(17,"nz-form-label",14),v.Sc(18,"Email"),v.fc(),v.bc(19,"div",7),v.gc(20,"label",15),v.Sc(21,"Email Confirmed"),v.fc(),v.fc(),v.gc(22,"nz-form-control"),v.bc(23,"input",16),v.fc(),v.fc(),v.gc(24,"div",12),v.gc(25,"div",13),v.gc(26,"nz-form-label",17),v.Sc(27,"Phone"),v.fc(),v.bc(28,"div",7),v.gc(29,"label",18),v.Sc(30,"Phone Confirmed"),v.fc(),v.fc(),v.gc(31,"nz-form-control"),v.bc(32,"input",19),v.fc(),v.fc(),v.fc(),v.gc(33,"div",8),v.gc(34,"div",12),v.gc(35,"nz-form-label",20),v.Sc(36,"Firstname"),v.fc(),v.gc(37,"nz-form-control"),v.bc(38,"input",21),v.fc(),v.fc(),v.gc(39,"div",12),v.gc(40,"nz-form-label",22),v.Sc(41,"Lastname"),v.fc(),v.gc(42,"nz-form-control"),v.bc(43,"input",23),v.fc(),v.fc(),v.fc(),v.fc(),v.bc(44,"div",24),v.gc(45,"div",25),v.gc(46,"nz-collapse",26),v.gc(47,"nz-collapse-panel",27),v.gc(48,"label",28),v.Sc(49," TwoFactorEnabled "),v.fc(),v.bc(50,"br"),v.gc(51,"label",29),v.Sc(52," LockoutEnabled "),v.fc(),v.bc(53,"br"),v.fc(),v.gc(54,"nz-collapse-panel",30),v.gc(55,"nz-date-picker",31),v.oc("ngModelChange",(function(e){return v.Ic(n),v.rc().onOk(e)})),v.fc(),v.fc(),v.fc(),v.fc(),v.fc(),v.fc(),v.gc(56,"nz-tab",4),v.Qc(57,Ze,2,0,"ng-template",null,32,v.Rc),v.Qc(59,et,2,0,"ng-template",33),v.fc(),v.gc(60,"nz-tab",4),v.Qc(61,tt,2,0,"ng-template",null,34,v.Rc),v.Qc(63,nt,2,0,"ng-template",33),v.fc(),v.Qc(64,ct,7,4,"nz-tab",35),v.sc(65,"async"),v.fc(),v.fc(),v.dc()}if(2&e){var i=v.Gc(5),c=v.Gc(58),o=v.Gc(62),r=v.rc();v.Mb(1),v.yc("formGroup",r.form),v.Mb(1),v.yc("nzAnimated",v.Ac(15,ot)),v.Mb(1),v.yc("nzTitle",i),v.Mb(5),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(19),v.yc("nzGutter",8),v.Mb(13),v.yc("nzBordered",!0),v.Mb(1),v.yc("nzActive",!0),v.Mb(7),v.yc("nzActive",!0),v.Mb(1),v.yc("nzFormat","dd.MM.yyyy 23:59"),v.Mb(1),v.yc("nzTitle",c),v.Mb(4),v.yc("nzTitle",o),v.Mb(4),v.yc("ngIf",v.tc(65,13,r.showDebugInformations$))}}function at(e,t){if(1&e){var n=v.hc();v.gc(0,"button",44),v.oc("click",(function(){return v.Ic(n),v.rc().Reload()})),v.bc(1,"i",45),v.Sc(2,"Reload"),v.fc()}}var lt,st=((lt=function(){function e(t,n,i,c,o){var r=this;_classCallCheck(this,e),this.uiService=t,this.fb=n,this.route=i,this.idService=c,this.cref=o,this.user$=Object(ue.a)(this.route.paramMap,this.route.queryParamMap,this.route.fragment).pipe(Object(de.a)((function(e){var t=_slicedToArray(e,3),n=t[0];return t[1],t[2],r.Id=n.get("id"),r.idService.GetUser(r.Id)})),Object(fe.a)(),Object(C.a)((function(e){return r.setUser(e)}))),this.showDebugInformations$=this.uiService.showDebugInformations$,t.Set((function(e){e.Header.Title="Identity User",e.Content.Scrollable=!1,e.Header.Icon="fa#user",e.Footer.Show=!0,e.Footer.Button1.Text="Save",e.Footer.Button2.Text="Reset",e.Footer.Button1.OnClick=function(){return r.Save()},e.Footer.Button2.OnClick=function(){r.form.reset(r.BaseUser)}}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({Id:[null],UserName:[null,p.p.required],Email:[null,p.p.required],FirstName:[null],LastName:[null],PhoneNumber:[null],EmailConfirmed:[!1],PhoneNumberConfirmed:[!1],TwoFactorEnabled:[!1],LockoutEnabled:[!1],ExpiresOn:[null],Claims:[[]],Roles:[[]]})}},{key:"setUser",value:function(e){this.BaseUser||(this.BaseUser=e),this.uiService.Set((function(t){t.Header.Title="Identity User",t.Header.Icon="form",t.Footer.Button1.Visible=!0,t.Footer.Button1.Text=e.Id?"Save Changes":"Create User",t.Footer.Button2.Visible=!0})),this.form.patchValue(e)}},{key:"onOk",value:function(e){null==e||e.setHours(23,59,0,0)}},{key:"Save",value:function(){console.log(this),"create"==this.Id?this.idService.CreateUser(this.form.value).subscribe():this.idService.UpdateUser(this.form.value).subscribe()}},{key:"Reload",value:function(){var e=this;this.idService.GetUser(this.Id).subscribe((function(t){e.setUser(t),e.idService.ReLoadRoles()}))}},{key:"BaseUser",set:function(e){this._baseUser=JSON.parse(JSON.stringify(e))},get:function(){return this._baseUser}}]),e}()).\u0275fac=function(e){return new(e||lt)(v.ac(y.a),v.ac(p.d),v.ac(b.a),v.ac(D),v.ac(v.h))},lt.\u0275cmp=v.Ub({type:lt,selectors:[["ng-component"]],decls:3,vars:3,consts:[[4,"ngIf"],["dbPortalTemplate","Header-Outlet-Right"],["nzNoColon","","nz-form","",2,"flex-grow","1","display","flex","flex-direction","column","overflow","hidden",3,"formGroup"],[3,"nzAnimated"],[3,"nzTitle"],["BasicTitle",""],[2,"display","flex","flex-direction","row","padding","3px"],[2,"flex-grow","1"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","","nzFor","UserName"],["nz-input","","formControlName","UserName","id","UserName",2,"width","100%"],["nz-col","","nzSpan","12"],[2,"display","flex","flex-direction","row","width","100%"],["nzRequired","","nzFor","Email"],["nz-checkbox","","formControlName","EmailConfirmed",2,"white-space","nowrap","margin","auto"],["nz-input","","formControlName","Email","id","Email",2,"flex-grow","1"],["nzFor","PhoneNumber"],["nz-checkbox","","formControlName","PhoneNumberConfirmed",2,"white-space","nowrap","margin","auto"],["nz-input","","formControlName","PhoneNumber","id","PhoneNumber",2,"flex-grow","1"],["nzFor","FirstName"],["nz-input","","formControlName","FirstName","id","FirstName",2,"width","100%"],["nzFor","LastName"],["nz-input","","formControlName","LastName","id","LastName",2,"width","100%"],[2,"width","10px","margin-right","10px"],[2,"width","30%"],[3,"nzBordered"],["nzHeader","Options",3,"nzActive"],["nz-checkbox","","formControlName","TwoFactorEnabled"],["nz-checkbox","","formControlName","LockoutEnabled"],["nzHeader","Expires On",3,"nzActive"],["formControlName","ExpiresOn","nzAllowClear","",2,"width","100%",3,"nzFormat","ngModelChange"],["RolesTitle",""],["nz-tab",""],["ClaimsTitle",""],[3,"nzTitle",4,"ngIf"],["nz-icon","","nzType","container"],["icon","fa#user-tag"],[2,"display","flex","flex-direction","row","padding","3px 0px","flex-grow","1"],["formControlName","Roles"],["formControlName","Claims"],["DebugTitle",""],[2,"height","100%"],["nz-icon","","nzType","bug"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.Qc(0,rt,66,16,"ng-container",0),v.sc(1,"async"),v.Qc(2,at,3,0,"ng-template",1)),2&e&&v.yc("ngIf",v.tc(1,1,t.user$))},directives:[g.t,F.e,p.q,p.m,he.b,p.g,ge.c,ge.a,pe.c,pe.a,he.d,he.a,be.b,p.c,p.l,p.f,me.a,ve.a,ve.c,ye.b,ge.b,E.a,j.b,Ce.c,Be,Ye,L.a,Q.a],pipes:[g.b,g.k],styles:[""],changeDetection:0}),lt);function ut(e,t){var n,i,c,o;return(null===(n=e.UserName)||void 0===n?void 0:n.toLowerCase())<(null===(i=t.UserName)||void 0===i?void 0:i.toLowerCase())?-1:(null===(c=e.UserName)||void 0===c?void 0:c.toLowerCase())>(null===(o=t.UserName)||void 0===o?void 0:o.toLowerCase())?1:0}function dt(e,t){if(1&e){var n=v.hc();v.gc(0,"i",16),v.oc("click",(function(){return v.Ic(n),v.rc(2).form.get("Filter").patchValue("")})),v.fc()}}function ft(e,t){if(1&e&&(v.Qc(0,dt,1,0,"i",15),v.sc(1,"async")),2&e){var n=v.rc();v.yc("ngIf",v.tc(1,1,n.form.get("Filter").valueChanges))}}var ht=function(){return["fas","chevron-left"]},gt=function(){return["fas","chevron-right"]};function pt(e,t){if(1&e){var n=v.hc();v.gc(0,"div",17),v.gc(1,"div",18),v.gc(2,"div",19),v.bc(3,"fa-icon",20),v.fc(),v.gc(4,"div",21),v.oc("click",(function(){v.Ic(n);var e=t.$implicit;return v.rc().ToggleUser(e)})),v.gc(5,"div",22),v.Sc(6),v.fc(),v.gc(7,"div"),v.Sc(8),v.fc(),v.gc(9,"div"),v.Sc(10),v.fc(),v.fc(),v.gc(11,"div",19),v.bc(12,"fa-icon",20),v.fc(),v.fc(),v.fc()}if(2&e){var i=t.$implicit;v.Sb("deleted",i.Deleted),v.Mb(2),v.Sb("shrinked",i.Selected),v.Mb(1),v.yc("icon",v.Ac(14,ht)),v.Mb(1),v.Sb("isSelected",i.Selected),v.Mb(2),v.Tc(i.UserName),v.Mb(2),v.Vc("",i.FirstName," ",i.LastName,""),v.Mb(2),v.Tc(i.Email),v.Mb(1),v.Sb("shrinked",!i.Selected),v.Mb(1),v.yc("icon",v.Ac(15,gt))}}var bt,mt=function(){return["fas","angle-double-right"]},vt=((bt=function(){function e(t,n,i){var c=this;_classCallCheck(this,e),this.identityUsersQuery=t,this.identityService=n,this.fb=i,this.selectedUsersSubject$=new ze.a([]),this.selectedUsersChanged=new v.q,this.closeSidebar=new v.q,this.form=this.fb.group({Filter:[null]}),this.filter$=Object(Me.a)(Object(we.a)(null),this.form.get("Filter").valueChanges),this.availableUsers$=Object(ue.a)(this.identityService.GetAllUsers(),this.selectedUsersSubject$,this.filter$).pipe(Object(de.a)((function(e){var t=_slicedToArray(e,3),n=t[0],i=t[1],o=t[2],r=n.filter((function(e){return e.Deleted})).map((function(e){return e.Id})),a=i.filter((function(e){return r.includes(e.Id)}));if(a&&a.length>0){var l=i.map((function(e){return Object.assign(Object.assign({},e),{Deleted:a.includes(e)})}));c.selectedUsersChanged.next(l)}var s=n;if(o){var u=new RegExp("".concat(o),"i");s=s.filter((function(e){return e.UserName.match(u)||e.Email.match(u)||e.Firstname.match(u)||e.Lastname.match(u)}))}return s.sort(ut).map((function(e){return Object.assign(Object.assign({},e),{Selected:i.map((function(e){return e.Id})).includes(e.Id)})}))})))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"ToggleUser",value:function(e){var t;t=e.Selected?this.selectedUsersSubject$.getValue().filter((function(t){return t.Id!=e.Id})):[].concat(_toConsumableArray(this.selectedUsersSubject$.getValue()),[e]),this.selectedUsersChanged.next(t)}},{key:"Close",value:function(){this.closeSidebar.next()}},{key:"selectedUsers",set:function(e){this.selectedUsersSubject$.next(e)}}]),e}()).\u0275fac=function(e){return new(e||bt)(v.ac(w),v.ac(D),v.ac(p.d))},bt.\u0275cmp=v.Ub({type:bt,selectors:[["add-users-list"]],inputs:{selectedUsers:"selectedUsers"},outputs:{selectedUsersChanged:"selectedUsersChanged",closeSidebar:"closeSidebar"},decls:19,vars:7,consts:[[1,"main-header"],[1,"title-container"],[1,"title-icon","closeSidebar",2,"padding-left","8px",3,"click"],["nz-icon","",2,"font-size","x-large","width","32px","text-align","left",3,"icon"],[1,"title-icon"],["icon","fa#users",2,"font-size","20px","text-align","left"],[2,"display","flex","flex-direction","column","justify-content","center","line-height","1.3em"],[1,"title"],["nzNoColon","","nz-form","",2,"padding","10px","border-bottom","1px solid #eaeaeb",3,"formGroup"],[3,"nzSuffix"],["type","text","nz-input","","formControlName","Filter","placeholder","Filter"],["inputClearTpl",""],[2,"overflow-x","auto"],[2,"margin","10px 5px"],["class","userItem",3,"deleted",4,"ngFor","ngForOf"],["nz-icon","","class","ant-input-clear-icon","nzTheme","fill","nzType","close-circle",3,"click",4,"ngIf"],["nz-icon","","nzTheme","fill","nzType","close-circle",1,"ant-input-clear-icon",3,"click"],[1,"userItem"],[2,"display","flex"],[1,"selector"],["nz-icon","",2,"width","1.18em","margin","0 .25rem 0 0","font-size","1.2em",3,"icon"],[1,"action-item",2,"padding","5px","flex-grow","1",3,"click"],[2,"font-size","large","font-weight","bold"]],template:function(e,t){if(1&e&&(v.gc(0,"div",0),v.gc(1,"div",1),v.gc(2,"div",2),v.oc("click",(function(){return t.Close()})),v.bc(3,"fa-icon",3),v.fc(),v.gc(4,"div",4),v.bc(5,"db-icon",5),v.fc(),v.gc(6,"div",6),v.gc(7,"div",7),v.Sc(8," Available Users "),v.fc(),v.fc(),v.fc(),v.fc(),v.gc(9,"form",8),v.gc(10,"nz-form-control"),v.gc(11,"nz-input-group",9),v.bc(12,"input",10),v.fc(),v.Qc(13,ft,2,3,"ng-template",null,11,v.Rc),v.fc(),v.fc(),v.gc(15,"div",12),v.gc(16,"div",13),v.Qc(17,pt,13,16,"div",14),v.sc(18,"async"),v.fc(),v.fc()),2&e){var n=v.Gc(14);v.Mb(3),v.yc("icon",v.Ac(6,mt)),v.Mb(6),v.yc("formGroup",t.form),v.Mb(2),v.yc("nzSuffix",n),v.Mb(6),v.yc("ngForOf",v.tc(18,4,t.availableUsers$))}},directives:[Re.b,E.a,j.b,Ce.c,p.q,p.m,he.b,p.g,pe.a,he.a,be.c,be.d,be.b,p.c,p.l,p.f,g.s,g.t],pipes:[g.b],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;height:100%}.action-item[_ngcontent-%COMP%]{margin-bottom:10px!important;border-radius:0!important;box-shadow:0 0 3px 1px #cecece;background-color:#fff}.action-item.disabled[_ngcontent-%COMP%]{opacity:.6;box-shadow:none;background-color:#e2e2e2}.action-item[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{border-right:1px solid #fff}.action-item[_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}.action-item.selected[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{background-color:#292f3b;color:#fff}.action-item[_ngcontent-%COMP%]:hover{background-color:#b2b7c2}.new-rule.ui.button[_ngcontent-%COMP%]{margin:0}.options[_ngcontent-%COMP%]{background-color:grey;height:50px}.list-item[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{background-color:inherit!important}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]:hover{background-color:inherit}.dragHandle[_ngcontent-%COMP%]{cursor:-webkit-grab;cursor:grab}.list-item[_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:#e0e1e2}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .dragHandle[_ngcontent-%COMP%]{cursor:inherit}.cdk-drop-list-dragging[_ngcontent-%COMP%]   .list-item[_ngcontent-%COMP%]   [_ngcontent-%COMP%]:hover   .dragHandle[_ngcontent-%COMP%]{background-color:inherit}.list-item.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%], .new-rule.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%]{border-radius:0!important;background-color:#2f2f2f;color:#f5f5f5}.outer.cdk-drop-list-dragging[_ngcontent-%COMP%] > .new-rule.cdk-drag.cdk-drag-placeholder[_ngcontent-%COMP%]{display:none}.context-menu[_ngcontent-%COMP%]   .item[_ngcontent-%COMP%]{margin:0!important}.selector[_ngcontent-%COMP%]{padding:10px 0 0 5px;overflow:hidden;visibility:hidden}.isSelected[_ngcontent-%COMP%]{background-color:#525e76;color:#fff}.shrinked[_ngcontent-%COMP%]{width:0;padding:0}.userItem[_ngcontent-%COMP%]:hover   .selector[_ngcontent-%COMP%]{visibility:visible}.main-header[_ngcontent-%COMP%]{min-height:40px;max-height:40px;background-color:#292f3b;color:#f5f5f5;display:flex;flex-direction:row}.closeSidebar[_ngcontent-%COMP%]{transition:.1s}.closeSidebar[_ngcontent-%COMP%]:hover{transform:scale(1.3) translate(3px)}.main-header[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]{display:flex;align-items:center}.main-header[_ngcontent-%COMP%]   .title-container[_ngcontent-%COMP%]   .title-icon[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;justify-items:center;padding-right:5px}.main-header[_ngcontent-%COMP%]   .title[_ngcontent-%COMP%]{font-size:1.5em;font-weight:700}.main-header[_ngcontent-%COMP%]   .title.title-only[_ngcontent-%COMP%]{font-size:2em}.deleted[_ngcontent-%COMP%]   .action-item[_ngcontent-%COMP%]{text-decoration:line-through}"]}),bt),yt=["itemsContextMenu"],Ct=["drawerTemplate"],St=function(){return["far","plus-square"]};function zt(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",7),v.gc(1,"li",8),v.oc("click",(function(){return v.Ic(n),v.rc().AddUser()})),v.bc(2,"fa-icon",9),v.Sc(3," Add User "),v.fc(),v.fc()}2&e&&(v.Mb(2),v.yc("icon",v.Ac(1,St)))}function xt(e,t){if(1&e){var n=v.hc();v.gc(0,"li",8),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveUser(e.SelectedData)})),v.bc(1,"i",11),v.Sc(2," Delete "),v.fc()}}function kt(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",7),v.gc(1,"li",8),v.oc("click",(function(){return v.Ic(n),v.rc().AddUser()})),v.bc(2,"fa-icon",9),v.Sc(3," Add User "),v.fc(),v.Qc(4,xt,3,0,"li",10),v.fc()}if(2&e){var i=t.$implicit;v.Mb(2),v.yc("icon",v.Ac(2,St)),v.Mb(2),v.yc("ngIf",i.Any)}}var Mt,wt=((Mt=function(){function e(t,n,i){var c=this;_classCallCheck(this,e),this.overlay=t,this.viewContainerRef=n,this.drawerService=i,this.usersSubject$=new ze.a(null),this._users=[],this.sideBarOpen=!1,this._disabled=!1,this.usersChange=new v.q,this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0}))}),(function(e){return e.Default("UserName").SetInitialWidth(200,!0)}),(function(e){return e.Default("FirstName").SetInitialWidth(200,!0)}),(function(e){return e.Default("LastName").SetInitialWidth(200,!0)}),(function(e){return e.Default("Email")})).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnDataUpdate((function(e){return c.propagateChange(e)})).OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);c.contextMenu=c.overlay.OpenContextMenu(e.event,c.itemsContextMenu,c.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){var n=new m.a(t,e);c.contextMenu=c.overlay.OpenContextMenu(e,c.itemsContextMenu,c.viewContainerRef,n)})).OnRowDoubleClicked((function(e){})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})).SetDataImmutable((function(e){return e.Id})).SetRowClassRules({deleted:"data.Deleted"}),this.registered=[],this.onTouched=function(){}}return _createClass(e,[{key:"RemoveUser",value:function(e){this.users=this.users.filter((function(t){return!e.includes(t)})),this.contextMenu.Close()}},{key:"AddUser",value:function(){this.sideBarOpen=!0,this.contextMenu.Close()}},{key:"UsersChanged",value:function(e){this.users=e,this.propagateChange(e)}},{key:"propagateChange",value:function(e){this.usersChange.emit(e),this.registered.forEach((function(t){t(e)}))}},{key:"writeValue",value:function(e){this.users=e}},{key:"registerOnChange",value:function(e){-1===this.registered.indexOf(e)&&this.registered.push(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"users",set:function(e){var t,n=e||[];0==n.length&&(n=[]),this._users=n.sort(ut),this.usersSubject$.next(this._users),null===(t=this.grid)||void 0===t||t.SetData(this._users)},get:function(){return this._users}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&!1!==e&&!!e}}]),e}()).\u0275fac=function(e){return new(e||Mt)(v.ac(N.c),v.ac(v.Y),v.ac(xe.b))},Mt.\u0275cmp=v.Ub({type:Mt,selectors:[["users-manager"]],viewQuery:function(e,t){var n;1&e&&(v.Xc(yt,!0),v.Xc(Ct,!0)),2&e&&(v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first),v.Fc(n=v.pc())&&(t.drawerTemplate=n.first))},inputs:{users:"users",disabled:"disabled"},outputs:{usersChange:"usersChange"},features:[v.Lb([{provide:p.j,useExisting:Mt,multi:!0}])],decls:9,vars:4,consts:[[2,"flex-grow","1","display","flex","position","relative"],["cdkDropList","",1,"ag-theme-balham",3,"dbGrid"],[1,"users-manager-sidebar"],[2,"height","100%","background-color","white"],[3,"selectedUsers","selectedUsersChanged","closeSidebar"],["viewportContextMenu",""],["itemsContextMenu",""],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","",3,"icon"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(v.gc(0,"div",0),v.bc(1,"ag-grid-angular",1),v.gc(2,"div",2),v.gc(3,"div",3),v.gc(4,"add-users-list",4),v.oc("selectedUsersChanged",(function(e){return t.UsersChanged(e)}))("closeSidebar",(function(){return t.sideBarOpen=!1})),v.fc(),v.fc(),v.fc(),v.fc(),v.Qc(5,zt,4,2,"ng-template",null,5,v.Rc),v.Qc(7,kt,5,3,"ng-template",null,6,v.Rc)),2&e&&(v.Mb(1),v.yc("dbGrid",t.grid),v.Mb(1),v.Sb("open",t.sideBarOpen),v.Mb(2),v.yc("selectedUsers",t.users))},directives:[U.a,m.b,ke.c,vt,G.c,E.a,G.e,Re.b,j.b,g.t],styles:["[_nghost-%COMP%]{width:100%;flex-grow:1;display:flex;flex-direction:column;overflow:hidden}.editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer;min-height:32px}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}.editable-row[_ngcontent-%COMP%]{height:49px}nz-table[_ngcontent-%COMP%]{flex-grow:1}.users-manager-sidebar[_ngcontent-%COMP%]{position:absolute;right:0;width:40%;height:100%;transition:.3s;border-left:1px solid grey;padding:0 1px 1px 0;transform:translate3d(100%,0,0)}.users-manager-sidebar.open[_ngcontent-%COMP%]{transform:translateZ(0)}"]}),Mt);function Rt(e,t){1&e&&(v.bc(0,"i",21),v.Sc(1,"Basic "))}function Ot(e,t){1&e&&(v.bc(0,"db-icon",22),v.Sc(1,"Members "))}function _t(e,t){1&e&&(v.gc(0,"div",23),v.bc(1,"users-manager",24),v.fc())}function It(e,t){1&e&&(v.bc(0,"i",27),v.Sc(1,"Debug"))}function Tt(e,t){if(1&e&&(v.gc(0,"nz-tab",4),v.Qc(1,It,2,0,"ng-template",null,25,v.Rc),v.gc(3,"div",26),v.gc(4,"pre"),v.Sc(5),v.sc(6,"json"),v.fc(),v.fc(),v.fc()),2&e){var n=v.Gc(2),i=v.rc(2);v.yc("nzTitle",n),v.Mb(5),v.Tc(v.tc(6,2,i.form.value))}}var At=function(){return{inkBar:!0,tabPane:!1}},Pt=function(){return{minRows:4,maxRows:12}};function Dt(e,t){if(1&e&&(v.ec(0),v.gc(1,"form",2),v.gc(2,"nz-tabset",3),v.gc(3,"nz-tab",4),v.Qc(4,Rt,2,0,"ng-template",null,5,v.Rc),v.gc(6,"div",6),v.gc(7,"div",7),v.gc(8,"div",8),v.gc(9,"div",9),v.gc(10,"nz-form-label",10),v.Sc(11,"Name"),v.fc(),v.gc(12,"nz-form-control"),v.bc(13,"input",11),v.fc(),v.fc(),v.fc(),v.gc(14,"div",8),v.gc(15,"div",9),v.gc(16,"nz-form-label",12),v.Sc(17,"DisplayName"),v.fc(),v.gc(18,"nz-form-control"),v.bc(19,"input",13),v.fc(),v.fc(),v.fc(),v.gc(20,"div",8),v.gc(21,"div",9),v.gc(22,"nz-form-label",14),v.Sc(23,"Description"),v.fc(),v.gc(24,"nz-form-control"),v.bc(25,"textarea",15),v.fc(),v.fc(),v.fc(),v.fc(),v.bc(26,"div",16),v.bc(27,"div",17),v.fc(),v.fc(),v.gc(28,"nz-tab",4),v.Qc(29,Ot,2,0,"ng-template",null,18,v.Rc),v.Qc(31,_t,2,0,"ng-template",19),v.fc(),v.Qc(32,Tt,7,4,"nz-tab",20),v.sc(33,"async"),v.fc(),v.fc(),v.dc()),2&e){var n=v.Gc(5),i=v.Gc(30),c=v.rc();v.Mb(1),v.yc("formGroup",c.form),v.Mb(1),v.yc("nzAnimated",v.Ac(11,At)),v.Mb(1),v.yc("nzTitle",n),v.Mb(5),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(5),v.yc("nzAutosize",v.Ac(12,Pt)),v.Mb(3),v.yc("nzTitle",i),v.Mb(4),v.yc("ngIf",v.tc(33,9,c.showDebugInformations$))}}function Nt(e,t){if(1&e){var n=v.hc();v.gc(0,"button",28),v.oc("click",(function(){return v.Ic(n),v.rc().Reload()})),v.bc(1,"i",29),v.Sc(2,"Reload"),v.fc()}}var Ut,Ft=((Ut=function(){function e(t,n,i,c,o){var r=this;_classCallCheck(this,e),this.uiService=t,this.fb=n,this.route=i,this.idService=c,this.cref=o,this.user$=Object(ue.a)(this.route.paramMap,this.route.queryParamMap,this.route.fragment).pipe(Object(de.a)((function(e){var t=_slicedToArray(e,3),n=t[0];return t[1],t[2],r.Id=n.get("id"),r.idService.GetRole(r.Id)})),Object(fe.a)(),Object(C.a)((function(e){return r.setRole(e)}))),this.showDebugInformations$=this.uiService.showDebugInformations$,t.Set((function(e){e.Header.Title="Role",e.Content.Scrollable=!1,e.Header.Icon="fa#user-tag",e.Footer.Show=!0,e.Footer.Button1.Text="Save",e.Footer.Button2.Text="Reset",e.Footer.Button1.OnClick=function(){return r.Save()},e.Footer.Button2.OnClick=function(){r.form.reset(r.BaseDto)}}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({Id:[null],Name:[null,p.p.required],DisplayName:[null,p.p.required],Description:[null],Users:[[]]})}},{key:"onOk",value:function(e){e.setHours(23,59,0,0)}},{key:"Save",value:function(){console.log(this),"create"==this.Id?this.idService.CreateRole(this.form.value).subscribe():this.idService.UpdateRole(this.form.value).subscribe()}},{key:"setRole",value:function(e){this.BaseDto||(this.BaseDto=e),this.uiService.Set((function(t){t.Header.Title="Role",t.Header.Icon="form",t.Footer.Button1.Visible=!0,t.Footer.Button1.Text=e.Id?"Save Changes":"Create Role",t.Footer.Button2.Visible=!0})),this.form.patchValue(e)}},{key:"Reload",value:function(){var e=this;this.idService.GetRole(this.Id).subscribe((function(t){e.setRole(t),e.idService.ReLoadUsers()}))}},{key:"BaseDto",set:function(e){this._baseDto=JSON.parse(JSON.stringify(e))},get:function(){return this._baseDto}}]),e}()).\u0275fac=function(e){return new(e||Ut)(v.ac(y.a),v.ac(p.d),v.ac(b.a),v.ac(D),v.ac(v.h))},Ut.\u0275cmp=v.Ub({type:Ut,selectors:[["ng-component"]],decls:3,vars:3,consts:[[4,"ngIf"],["dbPortalTemplate","Header-Outlet-Right"],["nzNoColon","","nz-form","",2,"flex-grow","1","display","flex","flex-direction","column","overflow","hidden",3,"formGroup"],[3,"nzAnimated"],[3,"nzTitle"],["BasicTitle",""],[2,"display","flex","flex-direction","row","padding","3px"],[2,"flex-grow","1"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","","nzFor","Name"],["nz-input","","formControlName","Name","id","Name",2,"width","100%"],["nzRequired","","nzFor","DisplayName"],["nz-input","","formControlName","DisplayName","id","DisplayName",2,"width","100%"],["nzFor","Description"],["nz-input","","formControlName","Description","id","Description",3,"nzAutosize"],[2,"width","10px","margin-right","10px"],[2,"width","30%"],["UsersTitle",""],["nz-tab",""],[3,"nzTitle",4,"ngIf"],["nz-icon","","nzType","container"],["icon","fa#users"],[2,"display","flex","flex-direction","row","padding","3px 0px","flex-grow","1"],["formControlName","Users"],["DebugTitle",""],[2,"height","100%"],["nz-icon","","nzType","bug"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.Qc(0,Dt,34,13,"ng-container",0),v.sc(1,"async"),v.Qc(2,Nt,3,0,"ng-template",1)),2&e&&v.yc("ngIf",v.tc(1,1,t.user$))},directives:[g.t,F.e,p.q,p.m,he.b,p.g,ge.c,ge.a,pe.c,pe.a,he.d,he.a,be.b,p.c,p.l,p.f,be.a,ge.b,E.a,j.b,Ce.c,wt,L.a,Q.a],pipes:[g.b,g.k],styles:[""]}),Ut),Gt=function e(){_classCallCheck(this,e),this.Type="SharedSecret"};function Et(e,t){return e.Expiration<t.Expiration?-1:e.Expiration>t.Expiration?1:0}var jt,Lt=n("zAKX"),Qt=((jt=function(){function e(t,n){_classCallCheck(this,e),this.fb=t,this.context=n,this.secret=n.data,this.form=this.fb.group({Type:[null,p.p.required],Value:[],Description:[],Expiration:[]}),this.form.patchValue(this.secret||{})}return _createClass(e,[{key:"onOk",value:function(e){null==e||e.setHours(23,59,0,0)}},{key:"ok",value:function(){var e=this;this.context.invoke("ok",this.form.value).subscribe((function(){e.context.handle.Close()}))}},{key:"cancel",value:function(){this.context.handle.Close()}},{key:"onValueChange",value:function(e){console.log("Current value: ".concat(e))}},{key:"onPanelChange",value:function(e){console.log("Current value: ".concat(e.date)),console.log("Current mode: ".concat(e.mode))}}]),e}()).\u0275fac=function(e){return new(e||jt)(v.ac(p.d),v.ac(N.d))},jt.\u0275cmp=v.Ub({type:jt,selectors:[["secret-modal"]],hostAttrs:[1,"flex-grow-column"],decls:32,vars:3,consts:[[1,"ui","top","attached","segment","modal-header",2,"padding","10px !important","display","flex"],[2,"color","whitesmoke","margin","auto"],[2,"font-size","2em","font-weight","bold","min-height","1.4285em","line-height","1.4285em","color","whitesmoke","margin","auto"],[2,"font-size","0.8em","line-height","initial","color","#bbbbbb"],["dbPortal","ModalSubHeader"],[2,"flex-grow","1"],[2,"display","flex","flex-direction","column","justify-content","center"],[1,"ui","attached","segment","modal-content"],["nz-form","",2,"flex-grow","1","display","flex","flex-direction","column",3,"formGroup"],[1,"field",2,"flex-grow","1","display","flex","flex-direction","column"],["formControlName","Type",2,"width","100%"],["nzLabel","Shared Secret","nzValue","SharedSecret"],["nz-input","","formControlName","Value"],["nz-input","","formControlName","Description"],["formControlName","Expiration","nzAllowClear","",2,"width","100%",3,"nzFormat","ngModelChange"],[1,"ui","bottom","attached","segment","modal-footer",2,"margin-bottom","0px"],["nz-button","","nzType","primary","nzBlock","",2,"margin-right","1px",3,"disabled","click"],["nz-button","","nzType","default","nzBlock","",1,"secondary",2,"margin-left","1px",3,"click"]],template:function(e,t){1&e&&(v.gc(0,"div",0),v.gc(1,"div",1),v.gc(2,"div",2),v.Sc(3," Secret "),v.fc(),v.gc(4,"div",3),v.cc(5,4),v.fc(),v.fc(),v.bc(6,"div",5),v.bc(7,"div",6),v.fc(),v.gc(8,"div",7),v.gc(9,"form",8),v.gc(10,"div",9),v.gc(11,"label"),v.Sc(12,"Type"),v.fc(),v.gc(13,"nz-select",10),v.bc(14,"nz-option",11),v.fc(),v.fc(),v.gc(15,"div",9),v.gc(16,"label"),v.Sc(17,"Value"),v.fc(),v.bc(18,"input",12),v.fc(),v.gc(19,"div",9),v.gc(20,"label"),v.Sc(21,"Description"),v.fc(),v.bc(22,"input",13),v.fc(),v.gc(23,"div",9),v.gc(24,"label"),v.Sc(25,"Description"),v.fc(),v.gc(26,"nz-date-picker",14),v.oc("ngModelChange",(function(e){return t.onOk(e)})),v.fc(),v.fc(),v.fc(),v.fc(),v.gc(27,"div",15),v.gc(28,"button",16),v.oc("click",(function(){return t.ok()})),v.Sc(29,"Save"),v.fc(),v.gc(30,"button",17),v.oc("click",(function(){return t.cancel()})),v.Sc(31,"Cancel"),v.fc(),v.fc()),2&e&&(v.Mb(9),v.yc("formGroup",t.form),v.Mb(17),v.yc("nzFormat","dd.MM.yyyy 23:59"),v.Mb(2),v.yc("disabled",!t.form.valid))},directives:[F.d,p.q,p.m,he.b,p.g,Lt.b,p.l,p.f,Lt.a,be.b,p.c,ye.b,L.a,Q.a,E.a],styles:[".modal-header[_ngcontent-%COMP%]{background-color:#292f3b!important;border:1px solid #fff!important}.modal-header[_ngcontent-%COMP%], .modal-header[_ngcontent-%COMP%]   .ui.huge.header[_ngcontent-%COMP%]{color:#fff!important}.modal-footer[_ngcontent-%COMP%]{padding:8px}.modal-content[_ngcontent-%COMP%], .modal-footer[_ngcontent-%COMP%]{border:none!important;display:flex}.modal-content[_ngcontent-%COMP%]{flex-grow:1;padding:8px 8px 0}.flex-grow-column[_ngcontent-%COMP%], .modal-content[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%], basic-modal[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]   ng-component[_ngcontent-%COMP%]{flex-grow:1;display:flex;flex-direction:column}basic-modal[_ngcontent-%COMP%]   div[name][_ngcontent-%COMP%]{min-height:1.28571429em}basic-modal[_ngcontent-%COMP%]{box-shadow:3px 3px 5px 0 #333}.secretCalendar[_ngcontent-%COMP%]  .ant-picker-calendar-mode-switch{display:none}"]}),jt),Bt=["itemsContextMenu"],Ht=function(){return["far","plus-square"]};function Wt(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",4),v.gc(1,"li",5),v.oc("click",(function(){return v.Ic(n),v.rc().AddSecret()})),v.bc(2,"fa-icon",6),v.Sc(3," Add Secret "),v.fc(),v.fc()}2&e&&(v.Mb(2),v.yc("icon",v.Ac(1,Ht)))}function $t(e,t){if(1&e){var n=v.hc();v.gc(0,"li",5),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveSecret(e.SelectedData)})),v.bc(1,"i",8),v.Sc(2," Delete "),v.fc()}}function Vt(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",4),v.gc(1,"li",5),v.oc("click",(function(){return v.Ic(n),v.rc().AddSecret()})),v.bc(2,"fa-icon",6),v.Sc(3," Add Secret "),v.fc(),v.Qc(4,$t,3,0,"li",7),v.fc()}if(2&e){var i=t.$implicit;v.Mb(2),v.yc("icon",v.Ac(2,Ht)),v.Mb(2),v.yc("ngIf",i.Any)}}var qt,Xt=((qt=function(){function e(t,n,i){var c=this;_classCallCheck(this,e),this.overlay=t,this.viewContainerRef=n,this.modal=i,this.secretsSubject$=new ze.a(null),this._secrets=[],this.sideBarOpen=!1,this._disabled=!1,this.secretsChange=new v.q,this.grid=(new m.d).SetColumns((function(e){return e.Default("Type").SetInitialWidth(160,!0).Resizeable(!1)}),(function(e){return e.Default("Description")}),(function(e){return e.Date("Expiration").SetInitialWidth(200,!0)})).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnDataUpdate((function(e){return c.propagateChange(e)})).OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);c.contextMenu=c.overlay.OpenContextMenu(e.event,c.itemsContextMenu,c.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){var n=new m.a(t,e);c.contextMenu=c.overlay.OpenContextMenu(e,c.itemsContextMenu,c.viewContainerRef,n)})).OnRowDoubleClicked((function(e){c.createSecret(e.data)})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})).SetRowClassRules({deleted:"data.Deleted"}),this.registered=[],this.onTouched=function(){}}return _createClass(e,[{key:"createSecret",value:function(e){var t,n=this,i=null!=e?e:new Gt;this.modal.FromComponent(Qt).SetData(i).SetMetaData({create:!e}).SetModalOptions({overlayConfig:{width:"400px"}}).OnClose((function(){})).AddEventHandler("ok",(function(t){var i=t.payload;return i.Id=null==e?void 0:e.Id,n.secrets=e?n.secrets.map((function(t){return t==e?i:t})):[].concat(_toConsumableArray(n.secrets),[i]),console.log(i),Object(we.a)(!0)})).Open(),null===(t=this.contextMenu)||void 0===t||t.Close()}},{key:"RemoveSecret",value:function(e){this.secrets=this.secrets.filter((function(t){return!e.includes(t)})),this.contextMenu.Close()}},{key:"AddSecret",value:function(){this.createSecret(),this.contextMenu.Close()}},{key:"SecretsChanged",value:function(e){this.secrets=e,this.propagateChange(e)}},{key:"propagateChange",value:function(e){this.secretsChange.emit(e),this.registered.forEach((function(t){t(e)}))}},{key:"writeValue",value:function(e){this.secrets=e}},{key:"registerOnChange",value:function(e){-1===this.registered.indexOf(e)&&this.registered.push(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"secrets",set:function(e){var t,n=e||[];0==n.length&&(n=[]),this._secrets=n.sort(Et),this.secretsSubject$.next(this._secrets),null===(t=this.grid)||void 0===t||t.SetData(this._secrets)},get:function(){return this._secrets}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&!1!==e&&!!e}}]),e}()).\u0275fac=function(e){return new(e||qt)(v.ac(N.c),v.ac(v.Y),v.ac(N.b))},qt.\u0275cmp=v.Ub({type:qt,selectors:[["secrets-manager"]],viewQuery:function(e,t){var n;1&e&&v.Xc(Bt,!0),2&e&&v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first)},inputs:{secrets:"secrets",disabled:"disabled"},outputs:{secretsChange:"secretsChange"},features:[v.Lb([{provide:p.j,useExisting:qt,multi:!0}])],decls:6,vars:1,consts:[[2,"flex-grow","1","display","flex","position","relative"],["cdkDropList","",1,"ag-theme-balham",3,"dbGrid"],["viewportContextMenu",""],["itemsContextMenu",""],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","",3,"icon"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(v.gc(0,"div",0),v.bc(1,"ag-grid-angular",1),v.fc(),v.Qc(2,Wt,4,2,"ng-template",null,2,v.Rc),v.Qc(4,Vt,5,3,"ng-template",null,3,v.Rc)),2&e&&(v.Mb(1),v.yc("dbGrid",t.grid))},directives:[U.a,m.b,ke.c,G.c,E.a,G.e,Re.b,j.b,g.t],styles:["[_nghost-%COMP%]{width:100%;flex-grow:1;display:flex;flex-direction:column;overflow:hidden}.editable-cell[_ngcontent-%COMP%]{position:relative;padding:5px 12px;cursor:pointer;min-height:32px}.editable-row[_ngcontent-%COMP%]:hover   .editable-cell[_ngcontent-%COMP%]{border:1px solid #d9d9d9;border-radius:4px;padding:4px 11px}.editable-row[_ngcontent-%COMP%]{height:49px}nz-table[_ngcontent-%COMP%]{flex-grow:1}.secrets-manager-sidebar[_ngcontent-%COMP%]{position:absolute;right:0;width:40%;height:100%;transition:.3s;border-left:1px solid grey;padding:0 1px 1px 0;transform:translate3d(100%,0,0)}.secrets-manager-sidebar.open[_ngcontent-%COMP%]{transform:translateZ(0)}"]}),qt),Jt=n("z4wI"),Yt=["itemsContextMenu"],Kt=function(){return["far","plus-square"]};function Zt(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddEntry()})),v.bc(2,"fa-icon",5),v.Sc(3," Add Entry "),v.fc(),v.fc()}2&e&&(v.Mb(2),v.yc("icon",v.Ac(1,Kt)))}function en(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveEntry(e.SelectedData)})),v.bc(1,"i",7),v.Sc(2," Delete "),v.fc()}}function tn(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddEntry()})),v.bc(2,"fa-icon",5),v.Sc(3," Add Entry "),v.fc(),v.Qc(4,en,3,0,"li",6),v.fc()}if(2&e){var i=t.$implicit;v.Mb(2),v.yc("icon",v.Ac(2,Kt)),v.Mb(2),v.yc("ngIf",i.Any)}}var nn,cn=((nn=function(){function e(t,n){_classCallCheck(this,e),this.overlay=t,this.viewContainerRef=n,this._entries=[],this.header="Value",this._disabled=!1,this.entriesChange=new v.q,this.registered=[],this.onTouched=function(){}}return _createClass(e,[{key:"SetListEntries",value:function(e){var t;this._entries=e,null===(t=this.grid)||void 0===t||t.SetData(this._entries)}},{key:"ngOnInit",value:function(){var e=this;this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0}))}),(function(t){return t.Default("Value").SetHeader(e.header).Editable()})).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnDataUpdate((function(t){return e.propagateChange(t)})).OnCellContextMenu((function(t){var n=t.api.getSelectedNodes();0!=n.length&&n.includes(t.node)||t.node.setSelected(!0,!0);var i=new m.a(t.api,t.event);e.contextMenu=e.overlay.OpenContextMenu(t.event,e.itemsContextMenu,e.viewContainerRef,i)})).OnViewPortContextMenu((function(t,n){n.deselectAll();var i=new m.a(n,t);e.contextMenu=e.overlay.OpenContextMenu(t,e.itemsContextMenu,e.viewContainerRef,i)})).OnRowDoubleClicked((function(e){})).SetData(this.entries).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})).SetGridOptions({onCellEditingStopped:function(t){var n=[];t.api.forEachNode((function(e){n.push(e.data)})),e.propagateChange(n)}})}},{key:"AddEntry",value:function(){this.entries=[].concat(_toConsumableArray(this.entries),[null]),this.contextMenu.Close()}},{key:"RemoveEntry",value:function(e){this.SetListEntries(this._entries.filter((function(t){return!e.includes(t)}))),this.contextMenu.Close()}},{key:"propagateChange",value:function(e){var t=e.map((function(e){return e.Value})).filter(Boolean);this.entriesChange.emit(t),this.registered.forEach((function(e){e(t)}))}},{key:"writeValue",value:function(e){this.entries=e}},{key:"registerOnChange",value:function(e){-1===this.registered.indexOf(e)&&this.registered.push(e)}},{key:"registerOnTouched",value:function(e){this.onTouched=e}},{key:"setDisabledState",value:function(e){this.disabled=e}},{key:"entries",set:function(e){var t=e||[];0==t.length&&(t=[]),this.SetListEntries(t.map((function(e){return new on(e)})))},get:function(){return this._entries.map((function(e){return e.Value}))}},{key:"disabled",get:function(){return this._disabled},set:function(e){this._disabled=null!=e&&!1!==e&&!!e}}]),e}()).\u0275fac=function(e){return new(e||nn)(v.ac(N.c),v.ac(v.Y))},nn.\u0275cmp=v.Ub({type:nn,selectors:[["simple-list"]],viewQuery:function(e,t){var n;1&e&&v.Xc(Yt,!0),2&e&&v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first)},inputs:{entries:"entries",header:"header",disabled:"disabled"},outputs:{entriesChange:"entriesChange"},features:[v.Lb([{provide:p.j,useExisting:nn,multi:!0}])],decls:5,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["viewportContextMenu",""],["itemsContextMenu",""],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","",3,"icon"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","delete","nzTheme","outline"]],template:function(e,t){1&e&&(v.bc(0,"ag-grid-angular",0),v.Qc(1,Zt,4,2,"ng-template",null,1,v.Rc),v.Qc(3,tn,5,3,"ng-template",null,2,v.Rc)),2&e&&v.yc("dbGrid",t.grid)},directives:[U.a,m.b,G.c,E.a,G.e,Re.b,j.b,g.t],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;flex-grow:1;height:100%}"]}),nn),on=function e(t){_classCallCheck(this,e),this.Value=t},rn=n("rMZv");function an(e,t){1&e&&(v.bc(0,"i",37),v.Sc(1,"Basic "))}function ln(e,t){1&e&&(v.bc(0,"i",37),v.Sc(1,"Consent Settings "))}function sn(e,t){1&e&&(v.gc(0,"div",6),v.gc(1,"div",7),v.gc(2,"div",8),v.gc(3,"div",9),v.gc(4,"nz-form-label",38),v.Sc(5,"ClientUri"),v.fc(),v.gc(6,"nz-form-control"),v.bc(7,"input",39),v.fc(),v.fc(),v.fc(),v.gc(8,"div",8),v.gc(9,"div",9),v.gc(10,"nz-form-label",40),v.Sc(11,"LogoUri"),v.fc(),v.gc(12,"nz-form-control"),v.bc(13,"input",41),v.fc(),v.fc(),v.fc(),v.fc(),v.bc(14,"div",17),v.gc(15,"div",18),v.gc(16,"nz-collapse",19),v.gc(17,"nz-collapse-panel",20),v.gc(18,"label",42),v.Sc(19," Require Consent "),v.fc(),v.bc(20,"br"),v.gc(21,"label",43),v.Sc(22," Allow Remember Consent "),v.fc(),v.bc(23,"br"),v.fc(),v.gc(24,"nz-collapse-panel",44),v.bc(25,"nz-input-number",45),v.gc(26,"span"),v.Sc(27,"Lifetime of a user consent in seconds. Defaults to null (no expiration)."),v.fc(),v.fc(),v.fc(),v.fc(),v.fc()),2&e&&(v.Mb(2),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(8),v.yc("nzBordered",!0),v.Mb(1),v.yc("nzActive",!0),v.Mb(7),v.yc("nzActive",!0),v.Mb(1),v.yc("nzStep",1))}function un(e,t){1&e&&(v.bc(0,"i",37),v.Sc(1,"Claims "))}function dn(e,t){1&e&&(v.gc(0,"div",46),v.gc(1,"div",47),v.bc(2,"claims-manager",48),v.fc(),v.bc(3,"div",17),v.gc(4,"div",49),v.gc(5,"nz-collapse",19),v.gc(6,"nz-collapse-panel",20),v.gc(7,"label",50),v.Sc(8," Always Send Client Claims "),v.fc(),v.bc(9,"br"),v.gc(10,"label",51),v.Sc(11," Always Include User Claims In IdToken "),v.fc(),v.bc(12,"br"),v.gc(13,"label",52),v.Sc(14," Update AccessToken Claims On Refresh "),v.fc(),v.bc(15,"br"),v.fc(),v.gc(16,"nz-collapse-panel",53),v.gc(17,"nz-form-control"),v.bc(18,"input",54),v.fc(),v.fc(),v.fc(),v.fc(),v.fc()),2&e&&(v.Mb(5),v.yc("nzBordered",!0),v.Mb(1),v.yc("nzActive",!0))}function fn(e,t){1&e&&(v.bc(0,"i",37),v.Sc(1,"Advanced Settings "))}function hn(e,t){1&e&&(v.gc(0,"div",55),v.gc(1,"nz-collapse",56),v.gc(2,"nz-collapse-panel",57),v.bc(3,"simple-list",58),v.fc(),v.gc(4,"nz-collapse-panel",59),v.bc(5,"simple-list",60),v.fc(),v.gc(6,"nz-collapse-panel",61),v.bc(7,"simple-list",62),v.fc(),v.gc(8,"nz-collapse-panel",63),v.gc(9,"table",64),v.gc(10,"thead"),v.gc(11,"tr"),v.bc(12,"th",65),v.bc(13,"th",66),v.fc(),v.fc(),v.gc(14,"tbody"),v.gc(15,"tr"),v.gc(16,"td"),v.Sc(17,"IdentityToken"),v.fc(),v.gc(18,"td"),v.bc(19,"nz-input-number",67),v.fc(),v.fc(),v.gc(20,"tr"),v.gc(21,"td"),v.Sc(22,"AccessToken"),v.fc(),v.gc(23,"td"),v.bc(24,"nz-input-number",68),v.fc(),v.fc(),v.gc(25,"tr"),v.gc(26,"td"),v.Sc(27,"AuthorizationCode"),v.fc(),v.gc(28,"td"),v.bc(29,"nz-input-number",69),v.fc(),v.fc(),v.gc(30,"tr"),v.gc(31,"td"),v.Sc(32,"AbsoluteRefreshToken"),v.fc(),v.gc(33,"td"),v.bc(34,"nz-input-number",70),v.fc(),v.fc(),v.gc(35,"tr"),v.gc(36,"td"),v.Sc(37,"SlidingRefreshToken"),v.fc(),v.gc(38,"td"),v.bc(39,"nz-input-number",71),v.fc(),v.fc(),v.gc(40,"tr"),v.gc(41,"td"),v.Sc(42,"UserSsoLifetime"),v.fc(),v.gc(43,"td"),v.bc(44,"nz-input-number",72),v.fc(),v.fc(),v.gc(45,"tr"),v.gc(46,"td"),v.Sc(47,"DeviceCodeLifetime"),v.fc(),v.gc(48,"td"),v.bc(49,"nz-input-number",73),v.fc(),v.fc(),v.fc(),v.fc(),v.fc(),v.fc(),v.fc()),2&e&&(v.Mb(1),v.yc("nzBordered",!0),v.Mb(18),v.yc("nzStep",1),v.Mb(5),v.yc("nzStep",1),v.Mb(5),v.yc("nzStep",1),v.Mb(5),v.yc("nzStep",1),v.Mb(5),v.yc("nzStep",1),v.Mb(5),v.yc("nzStep",1),v.Mb(5),v.yc("nzStep",1))}function gn(e,t){1&e&&(v.bc(0,"i",76),v.Sc(1,"Debug"))}function pn(e,t){if(1&e&&(v.gc(0,"nz-tab",4),v.Qc(1,gn,2,0,"ng-template",null,74,v.Rc),v.gc(3,"div",75),v.gc(4,"pre"),v.Sc(5),v.sc(6,"json"),v.fc(),v.fc(),v.fc()),2&e){var n=v.Gc(2),i=v.rc(2);v.yc("nzTitle",n),v.Mb(5),v.Tc(v.tc(6,2,i.form.value))}}var bn=function(){return{inkBar:!0,tabPane:!1}},mn=function(){return{minRows:4,maxRows:12}};function vn(e,t){if(1&e&&(v.ec(0),v.gc(1,"form",2),v.gc(2,"nz-tabset",3),v.gc(3,"nz-tab",4),v.Qc(4,an,2,0,"ng-template",null,5,v.Rc),v.gc(6,"div",6),v.gc(7,"div",7),v.gc(8,"div",8),v.gc(9,"div",9),v.gc(10,"nz-form-label",10),v.Sc(11,"ClientId"),v.fc(),v.gc(12,"nz-form-control"),v.bc(13,"input",11),v.fc(),v.fc(),v.fc(),v.gc(14,"div",8),v.gc(15,"div",9),v.gc(16,"nz-form-label",12),v.Sc(17,"ClientName"),v.fc(),v.gc(18,"nz-form-control"),v.bc(19,"input",13),v.fc(),v.fc(),v.fc(),v.gc(20,"div",8),v.gc(21,"div",9),v.gc(22,"nz-form-label",14),v.Sc(23,"Description"),v.fc(),v.gc(24,"nz-form-control"),v.bc(25,"textarea",15),v.fc(),v.fc(),v.fc(),v.gc(26,"div",8),v.gc(27,"div",9),v.gc(28,"nz-form-label",14),v.Sc(29,"Client Secrets"),v.fc(),v.gc(30,"nz-form-control"),v.bc(31,"secrets-manager",16),v.fc(),v.fc(),v.fc(),v.fc(),v.bc(32,"div",17),v.gc(33,"div",18),v.gc(34,"nz-collapse",19),v.gc(35,"nz-collapse-panel",20),v.gc(36,"label",21),v.Sc(37," Enabled "),v.fc(),v.bc(38,"br"),v.gc(39,"label",22),v.Sc(40," Require Client Secret "),v.fc(),v.bc(41,"br"),v.gc(42,"label",23),v.Sc(43," Require Pkce "),v.fc(),v.bc(44,"br"),v.gc(45,"label",24),v.Sc(46," Allow PlainText Pkce "),v.fc(),v.bc(47,"br"),v.fc(),v.gc(48,"nz-collapse-panel",25),v.gc(49,"label",26),v.Sc(50," Implicit "),v.fc(),v.bc(51,"br"),v.gc(52,"label",27),v.Sc(53," Hybrid "),v.fc(),v.bc(54,"br"),v.gc(55,"label",28),v.Sc(56," Authorization Code "),v.fc(),v.bc(57,"br"),v.gc(58,"label",29),v.Sc(59," Client Credentials "),v.fc(),v.bc(60,"br"),v.gc(61,"label",30),v.Sc(62," Resource Owner Password "),v.fc(),v.bc(63,"br"),v.gc(64,"label",31),v.Sc(65," Device Flow "),v.fc(),v.bc(66,"br"),v.fc(),v.fc(),v.fc(),v.fc(),v.fc(),v.gc(67,"nz-tab",4),v.Qc(68,ln,2,0,"ng-template",null,32,v.Rc),v.Qc(70,sn,28,6,"ng-template",33),v.fc(),v.gc(71,"nz-tab",4),v.Qc(72,un,2,0,"ng-template",null,34,v.Rc),v.Qc(74,dn,19,2,"ng-template",33),v.fc(),v.gc(75,"nz-tab",4),v.Qc(76,fn,2,0,"ng-template",null,35,v.Rc),v.Qc(78,hn,50,8,"ng-template",33),v.fc(),v.Qc(79,pn,7,4,"nz-tab",36),v.sc(80,"async"),v.fc(),v.fc(),v.dc()),2&e){var n=v.Gc(5),i=v.Gc(69),c=v.Gc(73),o=v.Gc(77),r=v.rc();v.Mb(1),v.yc("formGroup",r.form),v.Mb(1),v.yc("nzAnimated",v.Ac(17,bn)),v.Mb(1),v.yc("nzTitle",n),v.Mb(5),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(5),v.yc("nzAutosize",v.Ac(18,mn)),v.Mb(1),v.yc("nzGutter",8),v.Mb(8),v.yc("nzBordered",!0),v.Mb(1),v.yc("nzActive",!0),v.Mb(13),v.yc("nzActive",!0),v.Mb(19),v.yc("nzTitle",i),v.Mb(4),v.yc("nzTitle",c),v.Mb(4),v.yc("nzTitle",o),v.Mb(4),v.yc("ngIf",v.tc(80,15,r.showDebugInformations$))}}function yn(e,t){if(1&e){var n=v.hc();v.gc(0,"button",77),v.oc("click",(function(){return v.Ic(n),v.rc().Reload()})),v.bc(1,"i",78),v.Sc(2,"Reload"),v.fc()}}var Cn=["itemsContextMenu"];function Sn(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().EditApiResource(e.First)})),v.bc(1,"i",7),v.Sc(2," Edit ApiResource "),v.fc()}}function zn(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveApiResource(e.SelectedData)})),v.bc(1,"i",8),v.Sc(2," Delete ApiResource "),v.fc()}}function xn(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddApiResource()})),v.bc(2,"i",5),v.Sc(3," Add ApiResource "),v.fc(),v.Qc(4,Sn,3,0,"li",6),v.Qc(5,zn,3,0,"li",6),v.fc()}if(2&e){var i=t.$implicit;v.Mb(4),v.yc("ngIf",i.Single),v.Mb(1),v.yc("ngIf",i.Any)}}function kn(e,t){if(1&e){var n=v.hc();v.gc(0,"button",9),v.oc("click",(function(){return v.Ic(n),v.rc().ReloadApiResourcesList()})),v.bc(1,"i",10),v.Sc(2,"Reload Api-Resources"),v.fc()}}function Mn(e,t){1&e&&(v.bc(0,"i",29),v.Sc(1,"Basic "))}function wn(e,t){1&e&&(v.bc(0,"i",32),v.Sc(1,"Debug"))}function Rn(e,t){if(1&e&&(v.gc(0,"nz-tab",4),v.Qc(1,wn,2,0,"ng-template",null,30,v.Rc),v.gc(3,"div",31),v.gc(4,"pre"),v.Sc(5),v.sc(6,"json"),v.fc(),v.fc(),v.fc()),2&e){var n=v.Gc(2),i=v.rc(2);v.yc("nzTitle",n),v.Mb(5),v.Tc(v.tc(6,2,i.form.value))}}var On=function(){return{inkBar:!0,tabPane:!1}},_n=function(){return{minRows:4,maxRows:12}};function In(e,t){if(1&e&&(v.ec(0),v.gc(1,"form",2),v.gc(2,"nz-tabset",3),v.gc(3,"nz-tab",4),v.Qc(4,Mn,2,0,"ng-template",null,5,v.Rc),v.gc(6,"div",6),v.gc(7,"div",7),v.gc(8,"div",8),v.gc(9,"div",9),v.gc(10,"nz-form-label",10),v.Sc(11,"Name"),v.fc(),v.gc(12,"nz-form-control"),v.bc(13,"input",11),v.fc(),v.fc(),v.fc(),v.gc(14,"div",8),v.gc(15,"div",9),v.gc(16,"nz-form-label",12),v.Sc(17,"DisplayName"),v.fc(),v.gc(18,"nz-form-control"),v.bc(19,"input",13),v.fc(),v.fc(),v.fc(),v.gc(20,"div",8),v.gc(21,"div",9),v.gc(22,"nz-form-label",14),v.Sc(23,"Description"),v.fc(),v.gc(24,"nz-form-control"),v.bc(25,"textarea",15),v.fc(),v.fc(),v.fc(),v.gc(26,"div",8),v.gc(27,"div",9),v.gc(28,"nz-form-label",14),v.Sc(29,"Secrets"),v.fc(),v.gc(30,"nz-form-control"),v.bc(31,"secrets-manager",16),v.fc(),v.fc(),v.fc(),v.fc(),v.bc(32,"div",17),v.gc(33,"div",18),v.gc(34,"nz-collapse",19),v.gc(35,"nz-collapse-panel",20),v.gc(36,"label",21),v.Sc(37," Enabled "),v.fc(),v.bc(38,"br"),v.gc(39,"label",22),v.Sc(40," Show in Discovery Document "),v.fc(),v.bc(41,"br"),v.gc(42,"label",23),v.Sc(43," Allowed AccessToken SigningAlgorithms "),v.fc(),v.fc(),v.gc(44,"nz-collapse-panel",24),v.bc(45,"simple-list",25),v.fc(),v.gc(46,"nz-collapse-panel",26),v.bc(47,"simple-list",27),v.fc(),v.fc(),v.fc(),v.fc(),v.fc(),v.Qc(48,Rn,7,4,"nz-tab",28),v.sc(49,"async"),v.fc(),v.fc(),v.dc()),2&e){var n=v.Gc(5),i=v.rc();v.Mb(1),v.yc("formGroup",i.form),v.Mb(1),v.yc("nzAnimated",v.Ac(13,On)),v.Mb(1),v.yc("nzTitle",n),v.Mb(5),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(5),v.yc("nzAutosize",v.Ac(14,_n)),v.Mb(1),v.yc("nzGutter",8),v.Mb(8),v.yc("nzBordered",!0),v.Mb(1),v.yc("nzActive",!0),v.Mb(13),v.yc("ngIf",v.tc(49,11,i.showDebugInformations$))}}function Tn(e,t){if(1&e){var n=v.hc();v.gc(0,"button",33),v.oc("click",(function(){return v.Ic(n),v.rc().Reload()})),v.bc(1,"i",34),v.Sc(2,"Reload"),v.fc()}}var An=["itemsContextMenu"];function Pn(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().EditIdentityResource(e.First)})),v.bc(1,"i",7),v.Sc(2," Edit IdentityResource "),v.fc()}}function Dn(e,t){if(1&e){var n=v.hc();v.gc(0,"li",4),v.oc("click",(function(){v.Ic(n);var e=v.rc().$implicit;return v.rc().RemoveIdentityResource(e.SelectedData)})),v.bc(1,"i",8),v.Sc(2," Delete IdentityResource "),v.fc()}}function Nn(e,t){if(1&e){var n=v.hc();v.gc(0,"ul",3),v.gc(1,"li",4),v.oc("click",(function(){return v.Ic(n),v.rc().AddIdentityResource()})),v.bc(2,"i",5),v.Sc(3," Add IdentityResource "),v.fc(),v.Qc(4,Pn,3,0,"li",6),v.Qc(5,Dn,3,0,"li",6),v.fc()}if(2&e){var i=t.$implicit;v.Mb(4),v.yc("ngIf",i.Single),v.Mb(1),v.yc("ngIf",i.Any)}}function Un(e,t){if(1&e){var n=v.hc();v.gc(0,"button",9),v.oc("click",(function(){return v.Ic(n),v.rc().ReloadIdentityResourcesList()})),v.bc(1,"i",10),v.Sc(2,"Reload Identity-Resources"),v.fc()}}function Fn(e,t){1&e&&(v.bc(0,"i",27),v.Sc(1,"Basic "))}function Gn(e,t){1&e&&(v.bc(0,"i",30),v.Sc(1,"Debug"))}function En(e,t){if(1&e&&(v.gc(0,"nz-tab",4),v.Qc(1,Gn,2,0,"ng-template",null,28,v.Rc),v.gc(3,"div",29),v.gc(4,"pre"),v.Sc(5),v.sc(6,"json"),v.fc(),v.fc(),v.fc()),2&e){var n=v.Gc(2),i=v.rc(2);v.yc("nzTitle",n),v.Mb(5),v.Tc(v.tc(6,2,i.form.value))}}var jn=function(){return{inkBar:!0,tabPane:!1}},Ln=function(){return{minRows:4,maxRows:12}};function Qn(e,t){if(1&e&&(v.ec(0),v.gc(1,"form",2),v.gc(2,"nz-tabset",3),v.gc(3,"nz-tab",4),v.Qc(4,Fn,2,0,"ng-template",null,5,v.Rc),v.gc(6,"div",6),v.gc(7,"div",7),v.gc(8,"div",8),v.gc(9,"div",9),v.gc(10,"nz-form-label",10),v.Sc(11,"Name"),v.fc(),v.gc(12,"nz-form-control"),v.bc(13,"input",11),v.fc(),v.fc(),v.fc(),v.gc(14,"div",8),v.gc(15,"div",9),v.gc(16,"nz-form-label",12),v.Sc(17,"DisplayName"),v.fc(),v.gc(18,"nz-form-control"),v.bc(19,"input",13),v.fc(),v.fc(),v.fc(),v.gc(20,"div",8),v.gc(21,"div",9),v.gc(22,"nz-form-label",14),v.Sc(23,"Description"),v.fc(),v.gc(24,"nz-form-control"),v.bc(25,"textarea",15),v.fc(),v.fc(),v.fc(),v.fc(),v.bc(26,"div",16),v.gc(27,"div",17),v.gc(28,"nz-collapse",18),v.gc(29,"nz-collapse-panel",19),v.gc(30,"label",20),v.Sc(31," Enabled "),v.fc(),v.bc(32,"br"),v.gc(33,"label",21),v.Sc(34," Required "),v.fc(),v.bc(35,"br"),v.gc(36,"label",22),v.Sc(37," Emphasize "),v.fc(),v.bc(38,"br"),v.gc(39,"label",23),v.Sc(40," Show in Discovery Document "),v.fc(),v.fc(),v.gc(41,"nz-collapse-panel",24),v.bc(42,"simple-list",25),v.fc(),v.fc(),v.fc(),v.fc(),v.fc(),v.Qc(43,En,7,4,"nz-tab",26),v.sc(44,"async"),v.fc(),v.fc(),v.dc()),2&e){var n=v.Gc(5),i=v.rc();v.Mb(1),v.yc("formGroup",i.form),v.Mb(1),v.yc("nzAnimated",v.Ac(12,jn)),v.Mb(1),v.yc("nzTitle",n),v.Mb(5),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(6),v.yc("nzGutter",8),v.Mb(5),v.yc("nzAutosize",v.Ac(13,Ln)),v.Mb(3),v.yc("nzBordered",!0),v.Mb(1),v.yc("nzActive",!0),v.Mb(14),v.yc("ngIf",v.tc(44,10,i.showDebugInformations$))}}function Bn(e,t){if(1&e){var n=v.hc();v.gc(0,"button",31),v.oc("click",(function(){return v.Ic(n),v.rc().Reload()})),v.bc(1,"i",32),v.Sc(2,"Reload"),v.fc()}}var Hn,Wn,$n,Vn,qn,Xn,Jn,Yn=[{path:"users",component:X},{path:"users/:id",component:st},{path:"roles",component:ne},{path:"roles/:id",component:Ft},{path:"clients",component:se},{path:"clients/:id",component:(qn=function(){function e(t,n,i,c,o){var r=this;_classCallCheck(this,e),this.uiService=t,this.fb=n,this.route=i,this.idService=c,this.cref=o,this.user$=Object(ue.a)(this.route.paramMap,this.route.queryParamMap,this.route.fragment).pipe(Object(de.a)((function(e){var t=_slicedToArray(e,3),n=t[0];return t[1],t[2],r.Id=n.get("id"),r.idService.GetClient(r.Id)})),Object(fe.a)(),Object(C.a)((function(e){return r.setClient(e)}))),this.showDebugInformations$=this.uiService.showDebugInformations$,this.initForm(),t.Set((function(e){e.Header.Title="Client",e.Content.Scrollable=!1,e.Header.Icon="fa#user",e.Footer.Show=!0,e.Footer.Button1.Text="Save",e.Footer.Button2.Text="Reset",e.Footer.Button1.OnClick=function(){return r.Save()},e.Footer.Button2.OnClick=function(){r.form.reset(r.BaseDto)}}))}return _createClass(e,[{key:"ngOnInit",value:function(){}},{key:"initForm",value:function(){this.form=this.fb.group({Id:[null],ClientId:[null],ClientName:[null],Description:[null],Enabled:[null],RequireClientSecret:[null],RequirePkce:[null],AllowPlainTextPkce:[!1],AllowedGrantTypes:[[]],ClientUri:[null],LogoUri:[null],RequireConsent:[null],AllowRememberConsent:[!1],ConsentLifetime:[null],Claims:[[]],AlwaysIncludeUserClaimsInIdToken:[!1],UpdateAccessTokenClaimsOnRefresh:[!1],AlwaysSendClientClaims:[!1],ClientClaimsPrefix:[null],IdentityTokenLifetime:[null],AccessTokenLifetime:[null],AuthorizationCodeLifetime:[null],AbsoluteRefreshTokenLifetime:[null],SlidingRefreshTokenLifetime:[null],UserSsoLifetime:[null],DeviceCodeLifetime:[null],ProtocolType:[null],ClientSecrets:[[]],RequireRequestObject:[!1],AllowAccessTokensViaBrowser:[!1],RedirectUris:[[]],PostLogoutRedirectUris:[[]],FrontChannelLogoutUri:[null],FrontChannelLogoutSessionRequired:[!1],BackChannelLogoutUri:[null],BackChannelLogoutSessionRequired:[!1],AllowOfflineAccess:[!1],AllowedScopes:[[]],AllowedIdentityTokenSigningAlgorithms:[null],RefreshTokenUsage:[null],RefreshTokenExpiration:[null],AccessTokenType:[null],EnableLocalLogin:[!1],IdentityProviderRestrictions:[[]],IncludeJwtId:[!1],PairWiseSubjectSalt:[null],AllowedCorsOrigins:[[]],UserCodeType:[null],NonEditable:[!1]})}},{key:"Save",value:function(){console.log(this),"create"==this.Id?this.idService.CreateClient(this.form.value).subscribe():this.idService.UpdateClient(this.form.value).subscribe()}},{key:"setClient",value:function(e){this.BaseDto||(this.BaseDto=e),this.uiService.Set((function(t){t.Header.Title="Client",t.Header.Icon="form",t.Footer.Button1.Visible=!0,t.Footer.Button1.Text=e.Id?"Save Changes":"Create Client",t.Footer.Button2.Visible=!0})),this.form.patchValue(e)}},{key:"Reload",value:function(){var e=this;this.idService.GetClient(this.Id).subscribe((function(t){e.setClient(t)}))}},{key:"BaseDto",set:function(e){this._baseDto=JSON.parse(JSON.stringify(e))},get:function(){return this._baseDto}}]),e}(),qn.\u0275fac=function(e){return new(e||qn)(v.ac(y.a),v.ac(p.d),v.ac(b.a),v.ac(D),v.ac(v.h))},qn.\u0275cmp=v.Ub({type:qn,selectors:[["ng-component"]],decls:3,vars:3,consts:[[4,"ngIf"],["dbPortalTemplate","Header-Outlet-Right"],["nzNoColon","","nz-form","",2,"flex-grow","1","display","flex","flex-direction","column","overflow","hidden",3,"formGroup"],[3,"nzAnimated"],[3,"nzTitle"],["BasicTitle",""],[2,"display","flex","flex-direction","row","padding","3px"],[2,"flex-grow","1"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","","nzFor","ClientId"],["nz-input","","formControlName","ClientId","id","ClientId",2,"flex-grow","1"],["nzRequired","","nzFor","ClientName"],["nz-input","","formControlName","ClientName","id","ClientName",2,"width","100%"],["nzFor","Description"],["nz-input","","formControlName","Description","id","Description",3,"nzAutosize"],["formControlName","ClientSecrets",2,"height","200px"],[2,"width","10px","margin-right","10px"],[2,"width","30%"],[3,"nzBordered"],["nzHeader","Options",3,"nzActive"],["nz-checkbox","","formControlName","Enabled"],["nz-checkbox","","formControlName","RequireClientSecret"],["nz-checkbox","","formControlName","RequirePkce"],["nz-checkbox","","formControlName","AllowPlainTextPkce"],["nzHeader","AllowedGrantTypes","dbCheckboxGroup","","formControlName","AllowedGrantTypes","returnType","array",3,"nzActive"],["nz-checkbox","","nzValue","implicit"],["nz-checkbox","","nzValue","hybrid"],["nz-checkbox","","nzValue","authorization_code"],["nz-checkbox","","nzValue","client_credentials"],["nz-checkbox","","nzValue","password"],["nz-checkbox","","nzValue","urn:ietf:params:oauth:grant-type:device_code"],["ConsentTitle",""],["nz-tab",""],["ClaimsTitle",""],["AdvancedTitle",""],[3,"nzTitle",4,"ngIf"],["nz-icon","","nzType","container"],["nzFor","ClientUri"],["nz-input","","formControlName","ClientUri","id","ClientUri",2,"width","100%"],["nzFor","LogoUri"],["nz-input","","formControlName","LogoUri","id","LogoUri",2,"width","100%"],["nz-checkbox","","formControlName","RequireConsent"],["nz-checkbox","","formControlName","AllowRememberConsent"],["nzHeader","Consent Lifetime",3,"nzActive"],["formControlName","ConsentLifetime",2,"width","100%",3,"nzStep"],[2,"display","flex","flex-direction","row","padding","3px","flex-grow","1"],[2,"display","flex","flex-direction","row","flex-grow","1"],["formControlName","Claims"],[2,"width","25%"],["nz-checkbox","","formControlName","AlwaysSendClientClaims"],["nz-checkbox","","formControlName","AlwaysIncludeUserClaimsInIdToken"],["nz-checkbox","","formControlName","UpdateAccessTokenClaimsOnRefresh"],["nzHeader","Client Claims Prefix"],["nz-input","","formControlName","ClientClaimsPrefix","id","ClientClaimsPrefix",2,"width","100%"],[2,"display","flex","flex-direction","column","padding","3px","flex-grow","1"],[1,"bold-header",3,"nzBordered"],["nzHeader","Redirect Uris",1,"small-padding"],["header","Name","formControlName","RedirectUris",2,"height","300px"],["nzHeader","Post Logout Redirect Uris",1,"small-padding"],["header","Name","formControlName","PostLogoutRedirectUris",2,"height","300px"],["nzHeader","Allowed Cors Origins",1,"small-padding"],["header","Name","formControlName","AllowedCorsOrigins",2,"height","300px"],["nzHeader","Lifetime Options (in seconds)"],[1,"ui","table","compact"],[2,"width","200px"],[2,"width","300px"],["formControlName","IdentityTokenLifetime",2,"width","100%",3,"nzStep"],["formControlName","AccessTokenLifetime",2,"width","100%",3,"nzStep"],["formControlName","AuthorizationCodeLifetime",2,"width","100%",3,"nzStep"],["formControlName","AbsoluteRefreshTokenLifetime",2,"width","100%",3,"nzStep"],["formControlName","SlidingRefreshTokenLifetime",2,"width","100%",3,"nzStep"],["formControlName","UserSsoLifetime",2,"width","100%",3,"nzStep"],["formControlName","DeviceCodeLifetime",2,"width","100%",3,"nzStep"],["DebugTitle",""],[2,"height","100%"],["nz-icon","","nzType","bug"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.Qc(0,vn,81,19,"ng-container",0),v.sc(1,"async"),v.Qc(2,yn,3,0,"ng-template",1)),2&e&&v.yc("ngIf",v.tc(1,1,t.user$))},directives:[g.t,F.e,p.q,p.m,he.b,p.g,ge.c,ge.a,pe.c,pe.a,he.d,he.a,be.b,p.c,p.l,p.f,be.a,Xt,ve.a,ve.c,me.a,Ce.b,ge.b,E.a,j.b,Jt.a,Ye,cn,rn.e,rn.f,rn.a,rn.d,rn.c,L.a,Q.a],pipes:[g.b,g.k],styles:[""]}),qn)},{path:"api-resources",component:(Vn=function(){function e(t,n,i,c,o,r,a){var l=this;_classCallCheck(this,e),this.uiService=t,this.idService=n,this.router=i,this.route=c,this.overlay=o,this.viewContainerRef=r,this.apiResourcesQuery=a,this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0,e.headerCheckboxSelectionFilteredOnly=!0}))}),(function(e){return e.Default("Name")}),(function(e){return e.Default("DisplayName")}),(function(e){return e.Default("Description")})).SetData(this.idService.GetAllApiResources()).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);l.contextMenu=l.overlay.OpenContextMenu(e.event,l.itemsContextMenu,l.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){var n=new m.a(t,e);l.contextMenu=l.overlay.OpenContextMenu(e,l.itemsContextMenu,l.viewContainerRef,n)})).OnRowDoubleClicked((function(e){l.EditApiResource(e.node.data)})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})).SetRowClassRules({deleted:"data.Deleted"}).SetDataImmutable((function(e){return e.Id})),t.Set((function(e){e.Header.Title="IDP / Api-Resources",e.Content.Scrollable=!1,e.Header.Icon="fa#cubes"}))}return _createClass(e,[{key:"AddApiResource",value:function(){var e;this.router.navigate(["create"],{relativeTo:this.route}),null===(e=this.contextMenu)||void 0===e||e.Close()}},{key:"EditApiResource",value:function(e){var t;this.router.navigate([e.Id],{relativeTo:this.route}),null===(t=this.contextMenu)||void 0===t||t.Close()}},{key:"RemoveApiResource",value:function(e){var t,n;(t=this.idService).DeleteApiResource.apply(t,_toConsumableArray(e.map((function(e){return e.Id})))).subscribe(),null===(n=this.contextMenu)||void 0===n||n.Close()}},{key:"ReloadApiResourcesList",value:function(){this.idService.ReLoadApiResources()}}]),e}(),Vn.\u0275fac=function(e){return new(e||Vn)(v.ac(y.a),v.ac(D),v.ac(b.i),v.ac(b.a),v.ac(N.c),v.ac(v.Y),v.ac(I))},Vn.\u0275cmp=v.Ub({type:Vn,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&v.Xc(Cn,!0),2&e&&v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first)},decls:4,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["itemsContextMenu",""],["dbPortalTemplate","Header-Outlet-Right"],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","","nzType","user-add","nzTheme","outline"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.bc(0,"ag-grid-angular",0),v.Qc(1,xn,6,2,"ng-template",null,1,v.Rc),v.Qc(3,kn,3,0,"ng-template",2)),2&e&&v.yc("dbGrid",t.grid)},directives:[U.a,m.b,F.e,G.c,E.a,G.e,j.b,g.t,L.a,Q.a],styles:["[_nghost-%COMP%]{padding:10px 0}"]}),Vn)},{path:"api-resources/:id",component:($n=function(){function e(t,n,i,c,o){var r=this;_classCallCheck(this,e),this.uiService=t,this.fb=n,this.route=i,this.idService=c,this.cref=o,this.user$=Object(ue.a)(this.route.paramMap,this.route.queryParamMap,this.route.fragment).pipe(Object(de.a)((function(e){var t=_slicedToArray(e,3),n=t[0];return t[1],t[2],r.Id=n.get("id"),r.idService.GetApiResource(r.Id)})),Object(fe.a)(),Object(C.a)((function(e){return r.setApiResource(e)}))),this.showDebugInformations$=this.uiService.showDebugInformations$,t.Set((function(e){e.Header.Title="ApiResource",e.Content.Scrollable=!1,e.Header.Icon="fa#cubes",e.Footer.Show=!0,e.Footer.Button1.Text="Save",e.Footer.Button2.Text="Reset",e.Footer.Button1.OnClick=function(){return r.Save()},e.Footer.Button2.OnClick=function(){r.form.reset(r.BaseDto)}}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({Id:[null],Name:[null,p.p.required],DisplayName:[null,p.p.required],Description:[null],Enabled:[],AllowedAccessTokenSigningAlgorithms:[],ShowInDiscoveryDocument:[],Secrets:[[]],Scopes:[[]],UserClaims:[[]],Properties:[]})}},{key:"onOk",value:function(e){e.setHours(23,59,0,0)}},{key:"Save",value:function(){console.log(this),"create"==this.Id?this.idService.CreateApiResource(this.form.value).subscribe():this.idService.UpdateApiResource(this.form.value).subscribe()}},{key:"setApiResource",value:function(e){this.BaseDto||(this.BaseDto=e),this.uiService.Set((function(t){t.Header.Title="ApiResource",t.Header.Icon="form",t.Footer.Button1.Visible=!0,t.Footer.Button1.Text=e.Id?"Save Changes":"Create ApiResource",t.Footer.Button2.Visible=!0})),this.form.patchValue(e)}},{key:"Reload",value:function(){var e=this;this.idService.GetApiResource(this.Id).subscribe((function(t){e.setApiResource(t),e.idService.ReLoadUsers()}))}},{key:"BaseDto",set:function(e){this._baseDto=JSON.parse(JSON.stringify(e))},get:function(){return this._baseDto}}]),e}(),$n.\u0275fac=function(e){return new(e||$n)(v.ac(y.a),v.ac(p.d),v.ac(b.a),v.ac(D),v.ac(v.h))},$n.\u0275cmp=v.Ub({type:$n,selectors:[["ng-component"]],decls:3,vars:3,consts:[[4,"ngIf"],["dbPortalTemplate","Header-Outlet-Right"],["nzNoColon","","nz-form","",2,"flex-grow","1","display","flex","flex-direction","column","overflow","hidden",3,"formGroup"],[3,"nzAnimated"],[3,"nzTitle"],["BasicTitle",""],[2,"display","flex","flex-direction","row","padding","3px"],[2,"flex-grow","1"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","","nzFor","Name"],["nz-input","","formControlName","Name","id","Name",2,"width","100%"],["nzRequired","","nzFor","DisplayName"],["nz-input","","formControlName","DisplayName","id","DisplayName",2,"width","100%"],["nzFor","Description"],["nz-input","","formControlName","Description","id","Description",3,"nzAutosize"],["formControlName","Secrets",2,"height","200px"],[2,"width","10px","margin-right","10px"],[2,"width","30%"],["nzAccordion","",3,"nzBordered"],["nzHeader","Options",3,"nzActive"],["nz-checkbox","","formControlName","Enabled"],["nz-checkbox","","formControlName","ShowInDiscoveryDocument"],["nz-checkbox","","formControlName","AllowedAccessTokenSigningAlgorithms"],["nzHeader","Scopes",1,"small-padding"],["header","Name","formControlName","Scopes",2,"height","300px"],["nzHeader","User Claims",1,"small-padding"],["header","Name","formControlName","UserClaims",2,"height","300px"],[3,"nzTitle",4,"ngIf"],["nz-icon","","nzType","container"],["DebugTitle",""],[2,"height","100%"],["nz-icon","","nzType","bug"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.Qc(0,In,50,15,"ng-container",0),v.sc(1,"async"),v.Qc(2,Tn,3,0,"ng-template",1)),2&e&&v.yc("ngIf",v.tc(1,1,t.user$))},directives:[g.t,F.e,p.q,p.m,he.b,p.g,ge.c,ge.a,pe.c,pe.a,he.d,he.a,be.b,p.c,p.l,p.f,be.a,Xt,ve.a,ve.c,me.a,cn,E.a,j.b,L.a,Q.a],pipes:[g.b,g.k],styles:[""]}),$n)},{path:"identity-resources",component:(Wn=function(){function e(t,n,i,c,o,r,a){var l=this;_classCallCheck(this,e),this.uiService=t,this.idService=n,this.router=i,this.route=c,this.overlay=o,this.viewContainerRef=r,this.identityResourcesQuery=a,this.grid=(new m.d).SetColumns((function(e){return e.Default("").SetMaxWidth(40).SetMaxWidth(40).SuppressSizeToFit().Set((function(e){e.headerCheckboxSelection=!0,e.checkboxSelection=!0,e.headerCheckboxSelectionFilteredOnly=!0}))}),(function(e){return e.Default("Name")}),(function(e){return e.Default("DisplayName")}),(function(e){return e.Default("Description")})).SetData(this.idService.GetAllIdentityResources()).WithRowSelection("multiple").WithFullRowEditType().WithShiftResizeMode().OnCellContextMenu((function(e){var t=e.api.getSelectedNodes();0!=t.length&&t.includes(e.node)||e.node.setSelected(!0,!0);var n=new m.a(e.api,e.event);l.contextMenu=l.overlay.OpenContextMenu(e.event,l.itemsContextMenu,l.viewContainerRef,n)})).OnViewPortContextMenu((function(e,t){var n=new m.a(t,e);l.contextMenu=l.overlay.OpenContextMenu(e,l.itemsContextMenu,l.viewContainerRef,n)})).OnRowDoubleClicked((function(e){l.EditIdentityResource(e.node.data)})).StopEditingWhenGridLosesFocus().OnGridSizeChange((function(e){return e.api.sizeColumnsToFit()})).OnViewPortClick((function(e,t){t.deselectAll()})).SetRowClassRules({deleted:"data.Deleted"}).SetDataImmutable((function(e){return e.Id})),t.Set((function(e){e.Header.Title="IDP / Identity-Resources",e.Content.Scrollable=!1,e.Header.Icon="fa#far|address-card"}))}return _createClass(e,[{key:"AddIdentityResource",value:function(){var e;this.router.navigate(["create"],{relativeTo:this.route}),null===(e=this.contextMenu)||void 0===e||e.Close()}},{key:"EditIdentityResource",value:function(e){var t;this.router.navigate([e.Id],{relativeTo:this.route}),null===(t=this.contextMenu)||void 0===t||t.Close()}},{key:"RemoveIdentityResource",value:function(e){var t,n;(t=this.idService).DeleteIdentityResource.apply(t,_toConsumableArray(e.map((function(e){return e.Id})))).subscribe(),null===(n=this.contextMenu)||void 0===n||n.Close()}},{key:"ReloadIdentityResourcesList",value:function(){this.idService.ReLoadIdentityResources()}}]),e}(),Wn.\u0275fac=function(e){return new(e||Wn)(v.ac(y.a),v.ac(D),v.ac(b.i),v.ac(b.a),v.ac(N.c),v.ac(v.Y),v.ac(A))},Wn.\u0275cmp=v.Ub({type:Wn,selectors:[["ng-component"]],viewQuery:function(e,t){var n;1&e&&v.Xc(An,!0),2&e&&v.Fc(n=v.pc())&&(t.itemsContextMenu=n.first)},decls:4,vars:1,consts:[[1,"ag-theme-balham",3,"dbGrid"],["itemsContextMenu",""],["dbPortalTemplate","Header-Outlet-Right"],["nz-menu","","nzMode","vertical",1,"context-menu"],["nz-menu-item","",3,"click"],["nz-icon","","nzType","user-add","nzTheme","outline"],["nz-menu-item","",3,"click",4,"ngIf"],["nz-icon","","nzType","edit","nzTheme","outline"],["nz-icon","","nzType","delete","nzTheme","outline"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.bc(0,"ag-grid-angular",0),v.Qc(1,Nn,6,2,"ng-template",null,1,v.Rc),v.Qc(3,Un,3,0,"ng-template",2)),2&e&&v.yc("dbGrid",t.grid)},directives:[U.a,m.b,F.e,G.c,E.a,G.e,j.b,g.t,L.a,Q.a],styles:["[_nghost-%COMP%]{padding:10px 0}"]}),Wn)},{path:"identity-resources/:id",component:(Hn=function(){function e(t,n,i,c,o){var r=this;_classCallCheck(this,e),this.uiService=t,this.fb=n,this.route=i,this.idService=c,this.cref=o,this.user$=Object(ue.a)(this.route.paramMap,this.route.queryParamMap,this.route.fragment).pipe(Object(de.a)((function(e){var t=_slicedToArray(e,3),n=t[0];return t[1],t[2],r.Id=n.get("id"),r.idService.GetIdentityResource(r.Id)})),Object(fe.a)(),Object(C.a)((function(e){return r.setIdentityResource(e)}))),this.showDebugInformations$=this.uiService.showDebugInformations$,t.Set((function(e){e.Header.Title="IdentityResource",e.Content.Scrollable=!1,e.Header.Icon="fa#cubes",e.Footer.Show=!0,e.Footer.Button1.Text="Save",e.Footer.Button2.Text="Reset",e.Footer.Button1.OnClick=function(){return r.Save()},e.Footer.Button2.OnClick=function(){r.form.reset(r.BaseDto)}}))}return _createClass(e,[{key:"ngOnInit",value:function(){this.form=this.fb.group({Id:[null],Enabled:[],Name:[null,p.p.required],DisplayName:[null,p.p.required],Description:[null],Required:[],Emphasize:[],ShowInDiscoveryDocument:[],UserClaims:[[]],Properties:[]})}},{key:"onOk",value:function(e){e.setHours(23,59,0,0)}},{key:"Save",value:function(){console.log(this),"create"==this.Id?this.idService.CreateIdentityResource(this.form.value).subscribe():this.idService.UpdateIdentityResource(this.form.value).subscribe()}},{key:"setIdentityResource",value:function(e){this.BaseDto||(this.BaseDto=e),this.uiService.Set((function(t){t.Header.Title="IdentityResource",t.Header.Icon="form",t.Footer.Button1.Visible=!0,t.Footer.Button1.Text=e.Id?"Save Changes":"Create IdentityResource",t.Footer.Button2.Visible=!0})),this.form.patchValue(e)}},{key:"Reload",value:function(){var e=this;this.idService.GetIdentityResource(this.Id).subscribe((function(t){e.setIdentityResource(t),e.idService.ReLoadUsers()}))}},{key:"BaseDto",set:function(e){this._baseDto=JSON.parse(JSON.stringify(e))},get:function(){return this._baseDto}}]),e}(),Hn.\u0275fac=function(e){return new(e||Hn)(v.ac(y.a),v.ac(p.d),v.ac(b.a),v.ac(D),v.ac(v.h))},Hn.\u0275cmp=v.Ub({type:Hn,selectors:[["ng-component"]],decls:3,vars:3,consts:[[4,"ngIf"],["dbPortalTemplate","Header-Outlet-Right"],["nzNoColon","","nz-form","",2,"flex-grow","1","display","flex","flex-direction","column","overflow","hidden",3,"formGroup"],[3,"nzAnimated"],[3,"nzTitle"],["BasicTitle",""],[2,"display","flex","flex-direction","row","padding","3px"],[2,"flex-grow","1"],["nz-row","",3,"nzGutter"],["nz-col","","nzSpan","24"],["nzRequired","","nzFor","Name"],["nz-input","","formControlName","Name","id","Name",2,"width","100%"],["nzRequired","","nzFor","DisplayName"],["nz-input","","formControlName","DisplayName","id","DisplayName",2,"width","100%"],["nzFor","Description"],["nz-input","","formControlName","Description","id","Description",3,"nzAutosize"],[2,"width","10px","margin-right","10px"],[2,"width","30%"],["nzAccordion","",3,"nzBordered"],["nzHeader","Options",3,"nzActive"],["nz-checkbox","","formControlName","Enabled"],["nz-checkbox","","formControlName","Required"],["nz-checkbox","","formControlName","Emphasize"],["nz-checkbox","","formControlName","ShowInDiscoveryDocument"],["nzHeader","User Claims"],["header","Name","formControlName","UserClaims",2,"height","300px"],[3,"nzTitle",4,"ngIf"],["nz-icon","","nzType","container"],["DebugTitle",""],[2,"height","100%"],["nz-icon","","nzType","bug"],["nz-button","",3,"click"],["nz-icon","","nzType","sync"]],template:function(e,t){1&e&&(v.Qc(0,Qn,45,14,"ng-container",0),v.sc(1,"async"),v.Qc(2,Bn,3,0,"ng-template",1)),2&e&&v.yc("ngIf",v.tc(1,1,t.user$))},directives:[g.t,F.e,p.q,p.m,he.b,p.g,ge.c,ge.a,pe.c,pe.a,he.d,he.a,be.b,p.c,p.l,p.f,be.a,ve.a,ve.c,me.a,cn,E.a,j.b,L.a,Q.a],pipes:[g.b,g.k],styles:[""]}),Hn)}],Kn=((Xn=function e(){_classCallCheck(this,e)}).\u0275mod=v.Yb({type:Xn}),Xn.\u0275inj=v.Xb({factory:function(e){return new(e||Xn)},imports:[[b.l.forChild(Yn)],b.l]}),Xn),Zn=n("DTEk"),ei=((Jn=function e(){_classCallCheck(this,e)}).\u0275mod=v.Yb({type:Jn}),Jn.\u0275inj=v.Xb({factory:function(e){return new(e||Jn)},imports:[[g.c,p.o,p.i,Kn,N.a,m.c,Zn.a]]}),Jn)}}]);